{"version":3,"file":"main.js","sources":["../src/utils/processSchema.ts","../node_modules/vuelidate/lib/withParamsBrowser.js","../node_modules/vuelidate/lib/withParams.js","../node_modules/vuelidate/lib/validators/common.js","../node_modules/nanoclone/index.js","../node_modules/vuelidate/lib/validators/required.js","../node_modules/vuelidate/lib/validators/minLength.js","../node_modules/vuelidate/lib/validators/maxLength.js","../node_modules/vuelidate/lib/validators/minValue.js","../node_modules/vuelidate/lib/validators/maxValue.js","../src/utils/setValidators.ts","../src/utils/mergeDeep.ts","../src/utils/processConditions.ts","../node_modules/vuelidate/lib/vval.js","../node_modules/vuelidate/lib/params.js","../node_modules/vuelidate/lib/index.js","../src/JsonSchema/JsonSchema.vue","../src/utils/unrefSchema.ts","../src/App.vue","../src/main.ts"],"sourcesContent":["import { JSONSchema7 } from 'json-schema'\nimport { ISchema, IUiSchema, ComponentsConfig } from '@/types'\nimport { getComponent } from './getComponent'\n\nexport const processSchema = (schema: JSONSchema7) : ISchema => {\n  const strippedSchema : any = {\n    ...schema,\n    type: (schema.type !== 'null' && ((typeof schema.type) !== 'object')) ? schema.type : 'string'\n  }\n\n  if (schema.properties) {\n    strippedSchema.properties = {}\n\n    Object.entries(schema.properties).forEach(([propName, propSchema]) => {\n      strippedSchema.properties[propName] = processSchema(propSchema as JSONSchema7)\n    })\n  }\n\n  if (schema.items) strippedSchema.items = processSchema(schema.items as JSONSchema7)\n\n  return strippedSchema\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withParams = void 0;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar root = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : {};\n\nvar fakeWithParams = function fakeWithParams(paramsOrClosure, maybeValidator) {\n  if (_typeof(paramsOrClosure) === 'object' && maybeValidator !== undefined) {\n    return maybeValidator;\n  }\n\n  return paramsOrClosure(function () {});\n};\n\nvar withParams = root.vuelidate ? root.vuelidate.withParams : fakeWithParams;\nexports.withParams = withParams;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar withParams = process.env.BUILD === 'web' ? require('./withParamsBrowser').withParams : require('./params').withParams;\nvar _default = withParams;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"withParams\", {\n  enumerable: true,\n  get: function get() {\n    return _withParams.default;\n  }\n});\nexports.regex = exports.ref = exports.len = exports.req = void 0;\n\nvar _withParams = _interopRequireDefault(require(\"../withParams\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar req = function req(value) {\n  if (Array.isArray(value)) return !!value.length;\n\n  if (value === undefined || value === null) {\n    return false;\n  }\n\n  if (value === false) {\n    return true;\n  }\n\n  if (value instanceof Date) {\n    return !isNaN(value.getTime());\n  }\n\n  if (_typeof(value) === 'object') {\n    for (var _ in value) {\n      return true;\n    }\n\n    return false;\n  }\n\n  return !!String(value).length;\n};\n\nexports.req = req;\n\nvar len = function len(value) {\n  if (Array.isArray(value)) return value.length;\n\n  if (_typeof(value) === 'object') {\n    return Object.keys(value).length;\n  }\n\n  return String(value).length;\n};\n\nexports.len = len;\n\nvar ref = function ref(reference, vm, parentVm) {\n  return typeof reference === 'function' ? reference.call(vm, parentVm) : parentVm[reference];\n};\n\nexports.ref = ref;\n\nvar regex = function regex(type, expr) {\n  return (0, _withParams.default)({\n    type: type\n  }, function (value) {\n    return !req(value) || expr.test(value);\n  });\n};\n\nexports.regex = regex;","'use strict';\n\n// ES6 Map\nvar map;\ntry {\n  map = Map;\n} catch (_) { }\nvar set;\n\n// ES6 Set\ntry {\n  set = Set;\n} catch (_) { }\n\nfunction baseClone (src, circulars, clones) {\n  // Null/undefined/functions/etc\n  if (!src || typeof src !== 'object' || typeof src === 'function') {\n    return src\n  }\n\n  // DOM Node\n  if (src.nodeType && 'cloneNode' in src) {\n    return src.cloneNode(true)\n  }\n\n  // Date\n  if (src instanceof Date) {\n    return new Date(src.getTime())\n  }\n\n  // RegExp\n  if (src instanceof RegExp) {\n    return new RegExp(src)\n  }\n\n  // Arrays\n  if (Array.isArray(src)) {\n    return src.map(clone)\n  }\n\n  // ES6 Maps\n  if (map && src instanceof map) {\n    return new Map(Array.from(src.entries()))\n  }\n\n  // ES6 Sets\n  if (set && src instanceof set) {\n    return new Set(Array.from(src.values()))\n  }\n\n  // Object\n  if (src instanceof Object) {\n    circulars.push(src);\n    var obj = Object.create(src);\n    clones.push(obj);\n    for (var key in src) {\n      var idx = circulars.findIndex(function (i) {\n        return i === src[key]\n      });\n      obj[key] = idx > -1 ? clones[idx] : baseClone(src[key], circulars, clones);\n    }\n    return obj\n  }\n\n  // ???\n  return src\n}\n\nfunction clone (src) {\n  return baseClone(src, [], [])\n}\n\nmodule.exports = clone;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = (0, _common.withParams)({\n  type: 'required'\n}, _common.req);\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = function _default(length) {\n  return (0, _common.withParams)({\n    type: 'minLength',\n    min: length\n  }, function (value) {\n    return !(0, _common.req)(value) || (0, _common.len)(value) >= length;\n  });\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = function _default(length) {\n  return (0, _common.withParams)({\n    type: 'maxLength',\n    max: length\n  }, function (value) {\n    return !(0, _common.req)(value) || (0, _common.len)(value) <= length;\n  });\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = function _default(min) {\n  return (0, _common.withParams)({\n    type: 'minValue',\n    min: min\n  }, function (value) {\n    return !(0, _common.req)(value) || (!/\\s/.test(value) || value instanceof Date) && +value >= +min;\n  });\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = function _default(max) {\n  return (0, _common.withParams)({\n    type: 'maxValue',\n    max: max\n  }, function (value) {\n    return !(0, _common.req)(value) || (!/\\s/.test(value) || value instanceof Date) && +value <= +max;\n  });\n};\n\nexports.default = _default;","import required from 'vuelidate/lib/validators/required'\nimport minLength from 'vuelidate/lib/validators/minLength'\nimport maxLength from 'vuelidate/lib/validators/maxLength'\nimport minValue from 'vuelidate/lib/validators/minValue'\nimport maxValue from 'vuelidate/lib/validators/maxValue'\n\nimport { ISchema } from '@/types'\n\nexport const setValidators = (schema: ISchema) : any => {\n  const validations : any = {}\n\n  if (schema.properties) {\n    Object.keys(schema.properties).forEach((property) => {\n      const propertyObject : any = (schema.properties as any)[property]\n\n      validations[property] = {}\n\n      // requireds\n      if ((propertyObject.type === 'string' && propertyObject.minLength) ||\n          (propertyObject.type === 'number' && propertyObject.minimum) ||\n          (propertyObject.type === 'integer' && propertyObject.minimum) ||\n          (propertyObject.type === 'array' && propertyObject.minLength)) {\n        validations[property].required = required\n      }\n\n      if (propertyObject.minLength) validations[property].minLength = minLength(propertyObject.minLength)\n\n      if (propertyObject.maxLength) validations[property].maxLength = maxLength(propertyObject.maxLength)\n\n      if (propertyObject.minimum) validations[property].minValue = minValue(propertyObject.minimum)\n\n      if (propertyObject.maximum) validations[property].maxValue = maxValue(propertyObject.maximum)\n\n      // set nested validators\n      if (propertyObject.type === 'object') validations[property] = setValidators(propertyObject)\n\n      // if (propertyObject.format === 'phone') validations[property].phone = correctPhone(propertyObject)\n\n      // set item validators for array of objects\n      if (propertyObject.type === 'array' && propertyObject.items && propertyObject.items.type === 'object') {\n        validations[property] = {\n          ...validations[property],\n          $each: setValidators(propertyObject.items)\n        }\n      }\n    })\n  }\n\n  return validations\n}\n","import { IAnyObject } from '@/types'\n\nfunction isObject (item: any) {\n  return (item && typeof item === 'object' && !Array.isArray(item))\n}\n\nexport function mergeDeep (target: IAnyObject, ...sources: IAnyObject[]) : IAnyObject {\n  if (!sources.length) return target\n  const source = sources.shift()\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} })\n        mergeDeep(target[key], source[key])\n      } else {\n        Object.assign(target, { [key]: source[key] })\n      }\n    }\n  }\n\n  return mergeDeep(target, ...sources)\n}\n","import { ISchema, IAnyObject } from '@/types'\nimport clone from 'nanoclone'\nimport { mergeDeep } from './mergeDeep'\n\ntype AllOfCondition = {\n  allOf: Array<SimpleCondition>\n  then: IAnyObject\n}\n\ntype OneOfCondition = {\n  oneOf: Array<SimpleCondition>\n  then: IAnyObject\n}\n\ntype SimpleCondition = {\n  if: any,\n  then: IAnyObject\n}\n\ntype ICondition = SimpleCondition | AllOfCondition | OneOfCondition\n\n//  requirment types\n\ntype ConstRequirment = { const: any }\n\ntype MinLengthRequirment = { minLength: number }\n\ntype IRequirment = ConstRequirment | MinLengthRequirment\n\n// type IRequirmentTree = {\n//   properties: {\n//     [key: string]: IRequirmentTree | ConstRequirment | MinLengthRequirment\n//   },\n//   not: undefined\n// }\n\ntype IRequirmentTree = any\n\ntype BaseRequirment = {\n  not: IRequirmentTree\n} | IRequirmentTree\n\nexport const processSchemaConditions = (schema: ISchema, data: IAnyObject) => {\n  const newSchema = { ...schema }\n\n  if (schema.allOf) {\n    schema.allOf.forEach(condition => processCondition(condition, data, newSchema))\n  }\n\n  if (schema.if) processCondition(schema as SimpleCondition, data, newSchema)\n\n  Object.keys(schema.properties || {}).forEach(property => {\n    if (schema.properties && schema.properties[property].type === 'object') {\n      if (newSchema.properties && data && data[property]) newSchema.properties[property] = processSchemaConditions(schema.properties[property], data[property])\n    }\n  })\n\n  return newSchema\n}\n\nconst processCondition = (condition: SimpleCondition, data: IAnyObject, newSchema: ISchema) => {\n  // several requirments\n  if (condition.if.allOf) {\n    const requirments = condition.if.allOf\n\n    if (requirments.every((requirment: BaseRequirment) => checkRequierment(requirment, data))) {\n      applyCondition(newSchema, condition.then)\n    }\n\n    return\n  }\n\n  // needs one requirment\n  if (condition.if.oneOf) {\n    const requirments = condition.if.oneOf\n\n    if (requirments.some((requirment: BaseRequirment) => checkRequierment(requirment, data))) {\n      applyCondition(newSchema, condition.then)\n    }\n\n    return\n  }\n\n  // straighforward one requirment\n  if (checkRequierment(condition.if, data)) applyCondition(newSchema, condition.then)\n}\n\nexport const checkRequierment = (requirment: BaseRequirment, data: IAnyObject = {}) => {\n  // TODO: different types of requirments\n  // TODO: allOf, oneOf\n  // now only minLength and const are supported\n\n  let currentPath = requirment.not ? requirment.not.properties : requirment.properties\n  let currentValue = data\n  let currentParamName = Object.keys(currentPath)[0]\n\n  while (currentParamName !== 'const' && currentParamName !== 'minLength') {\n    if (typeof currentPath !== 'object') {\n      console.warn('[JSON-SCHEMA] Invalid IF condition: ', requirment)\n\n      return false\n    }\n\n    currentPath = currentPath[currentParamName]\n\n    if (currentParamName !== 'properties') {\n      if (typeof currentValue !== 'object') {\n        console.warn('[JSON-SCHEMA] Invalid IF condition: ', requirment)\n\n        return false\n      }\n\n      currentValue = currentValue[currentParamName]\n    }\n\n    currentParamName = Object.keys(currentPath)[0]\n  }\n\n  if (currentParamName === 'const') {\n    return requirment.not ? currentPath.const !== currentValue : currentPath.const === currentValue\n  }\n\n  if (currentParamName === 'minLength') {\n    return requirment.not\n      ? currentPath.minLength > (currentValue || '').length\n      : currentPath.minLength <= (currentValue || '').length\n  }\n\n  // return false\n}\n\nconst applyCondition = (schema: ISchema, then: IAnyObject) => {\n  return mergeDeep(schema, then)\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.patchChildren = patchChildren;\nexports.h = h;\n\nfunction isUndef(v) {\n  return v === null || v === undefined;\n}\n\nfunction isDef(v) {\n  return v !== null && v !== undefined;\n}\n\nfunction sameVval(oldVval, vval) {\n  return vval.tag === oldVval.tag && vval.key === oldVval.key;\n}\n\nfunction createVm(vval) {\n  var Vm = vval.tag;\n  vval.vm = new Vm({\n    data: vval.args\n  });\n}\n\nfunction updateVval(vval) {\n  var keys = Object.keys(vval.args);\n\n  for (var i = 0; i < keys.length; i++) {\n    keys.forEach(function (k) {\n      vval.vm[k] = vval.args[k];\n    });\n  }\n}\n\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n  var i, key;\n  var map = {};\n\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) map[key] = i;\n  }\n\n  return map;\n}\n\nfunction updateChildren(oldCh, newCh) {\n  var oldStartIdx = 0;\n  var newStartIdx = 0;\n  var oldEndIdx = oldCh.length - 1;\n  var oldStartVval = oldCh[0];\n  var oldEndVval = oldCh[oldEndIdx];\n  var newEndIdx = newCh.length - 1;\n  var newStartVval = newCh[0];\n  var newEndVval = newCh[newEndIdx];\n  var oldKeyToIdx, idxInOld, elmToMove;\n\n  while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n    if (isUndef(oldStartVval)) {\n      oldStartVval = oldCh[++oldStartIdx];\n    } else if (isUndef(oldEndVval)) {\n      oldEndVval = oldCh[--oldEndIdx];\n    } else if (sameVval(oldStartVval, newStartVval)) {\n      patchVval(oldStartVval, newStartVval);\n      oldStartVval = oldCh[++oldStartIdx];\n      newStartVval = newCh[++newStartIdx];\n    } else if (sameVval(oldEndVval, newEndVval)) {\n      patchVval(oldEndVval, newEndVval);\n      oldEndVval = oldCh[--oldEndIdx];\n      newEndVval = newCh[--newEndIdx];\n    } else if (sameVval(oldStartVval, newEndVval)) {\n      patchVval(oldStartVval, newEndVval);\n      oldStartVval = oldCh[++oldStartIdx];\n      newEndVval = newCh[--newEndIdx];\n    } else if (sameVval(oldEndVval, newStartVval)) {\n      patchVval(oldEndVval, newStartVval);\n      oldEndVval = oldCh[--oldEndIdx];\n      newStartVval = newCh[++newStartIdx];\n    } else {\n      if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n      idxInOld = isDef(newStartVval.key) ? oldKeyToIdx[newStartVval.key] : null;\n\n      if (isUndef(idxInOld)) {\n        createVm(newStartVval);\n        newStartVval = newCh[++newStartIdx];\n      } else {\n        elmToMove = oldCh[idxInOld];\n\n        if (sameVval(elmToMove, newStartVval)) {\n          patchVval(elmToMove, newStartVval);\n          oldCh[idxInOld] = undefined;\n          newStartVval = newCh[++newStartIdx];\n        } else {\n          createVm(newStartVval);\n          newStartVval = newCh[++newStartIdx];\n        }\n      }\n    }\n  }\n\n  if (oldStartIdx > oldEndIdx) {\n    addVvals(newCh, newStartIdx, newEndIdx);\n  } else if (newStartIdx > newEndIdx) {\n    removeVvals(oldCh, oldStartIdx, oldEndIdx);\n  }\n}\n\nfunction addVvals(vvals, startIdx, endIdx) {\n  for (; startIdx <= endIdx; ++startIdx) {\n    createVm(vvals[startIdx]);\n  }\n}\n\nfunction removeVvals(vvals, startIdx, endIdx) {\n  for (; startIdx <= endIdx; ++startIdx) {\n    var ch = vvals[startIdx];\n\n    if (isDef(ch)) {\n      ch.vm.$destroy();\n      ch.vm = null;\n    }\n  }\n}\n\nfunction patchVval(oldVval, vval) {\n  if (oldVval === vval) {\n    return;\n  }\n\n  vval.vm = oldVval.vm;\n  updateVval(vval);\n}\n\nfunction patchChildren(oldCh, ch) {\n  if (isDef(oldCh) && isDef(ch)) {\n    if (oldCh !== ch) updateChildren(oldCh, ch);\n  } else if (isDef(ch)) {\n    addVvals(ch, 0, ch.length - 1);\n  } else if (isDef(oldCh)) {\n    removeVvals(oldCh, 0, oldCh.length - 1);\n  }\n}\n\nfunction h(tag, key, args) {\n  return {\n    tag: tag,\n    key: key,\n    args: args\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pushParams = pushParams;\nexports.popParams = popParams;\nexports.withParams = withParams;\nexports._setTarget = exports.target = void 0;\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar stack = [];\nvar target = null;\nexports.target = target;\n\nvar _setTarget = function _setTarget(x) {\n  exports.target = target = x;\n};\n\nexports._setTarget = _setTarget;\n\nfunction pushParams() {\n  if (target !== null) {\n    stack.push(target);\n  }\n\n  exports.target = target = {};\n}\n\nfunction popParams() {\n  var lastTarget = target;\n  var newTarget = exports.target = target = stack.pop() || null;\n\n  if (newTarget) {\n    if (!Array.isArray(newTarget.$sub)) {\n      newTarget.$sub = [];\n    }\n\n    newTarget.$sub.push(lastTarget);\n  }\n\n  return lastTarget;\n}\n\nfunction addParams(params) {\n  if (_typeof(params) === 'object' && !Array.isArray(params)) {\n    exports.target = target = _objectSpread({}, target, params);\n  } else {\n    throw new Error('params must be an object');\n  }\n}\n\nfunction withParamsDirect(params, validator) {\n  return withParamsClosure(function (add) {\n    return function () {\n      add(params);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return validator.apply(this, args);\n    };\n  });\n}\n\nfunction withParamsClosure(closure) {\n  var validator = closure(addParams);\n  return function () {\n    pushParams();\n\n    try {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return validator.apply(this, args);\n    } finally {\n      popParams();\n    }\n  };\n}\n\nfunction withParams(paramsOrClosure, maybeValidator) {\n  if (_typeof(paramsOrClosure) === 'object' && maybeValidator !== undefined) {\n    return withParamsDirect(paramsOrClosure, maybeValidator);\n  }\n\n  return withParamsClosure(paramsOrClosure);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Vuelidate = Vuelidate;\nObject.defineProperty(exports, \"withParams\", {\n  enumerable: true,\n  get: function get() {\n    return _params.withParams;\n  }\n});\nexports.default = exports.validationMixin = void 0;\n\nvar _vval = require(\"./vval\");\n\nvar _params = require(\"./params\");\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar NIL = function NIL() {\n  return null;\n};\n\nvar buildFromKeys = function buildFromKeys(keys, fn, keyFn) {\n  return keys.reduce(function (build, key) {\n    build[keyFn ? keyFn(key) : key] = fn(key);\n    return build;\n  }, {});\n};\n\nfunction isFunction(val) {\n  return typeof val === 'function';\n}\n\nfunction isObject(val) {\n  return val !== null && (_typeof(val) === 'object' || isFunction(val));\n}\n\nfunction isPromise(object) {\n  return isObject(object) && isFunction(object.then);\n}\n\nvar getPath = function getPath(ctx, obj, path, fallback) {\n  if (typeof path === 'function') {\n    return path.call(ctx, obj, fallback);\n  }\n\n  path = Array.isArray(path) ? path : path.split('.');\n\n  for (var i = 0; i < path.length; i++) {\n    if (obj && _typeof(obj) === 'object') {\n      obj = obj[path[i]];\n    } else {\n      return fallback;\n    }\n  }\n\n  return typeof obj === 'undefined' ? fallback : obj;\n};\n\nvar __isVuelidateAsyncVm = '__isVuelidateAsyncVm';\n\nfunction makePendingAsyncVm(Vue, promise) {\n  var asyncVm = new Vue({\n    data: {\n      p: true,\n      v: false\n    }\n  });\n  promise.then(function (value) {\n    asyncVm.p = false;\n    asyncVm.v = value;\n  }, function (error) {\n    asyncVm.p = false;\n    asyncVm.v = false;\n    throw error;\n  });\n  asyncVm[__isVuelidateAsyncVm] = true;\n  return asyncVm;\n}\n\nvar validationGetters = {\n  $invalid: function $invalid() {\n    var _this = this;\n\n    var proxy = this.proxy;\n    return this.nestedKeys.some(function (nested) {\n      return _this.refProxy(nested).$invalid;\n    }) || this.ruleKeys.some(function (rule) {\n      return !proxy[rule];\n    });\n  },\n  $dirty: function $dirty() {\n    var _this2 = this;\n\n    if (this.dirty) {\n      return true;\n    }\n\n    if (this.nestedKeys.length === 0) {\n      return false;\n    }\n\n    return this.nestedKeys.every(function (key) {\n      return _this2.refProxy(key).$dirty;\n    });\n  },\n  $anyDirty: function $anyDirty() {\n    var _this3 = this;\n\n    if (this.dirty) {\n      return true;\n    }\n\n    if (this.nestedKeys.length === 0) {\n      return false;\n    }\n\n    return this.nestedKeys.some(function (key) {\n      return _this3.refProxy(key).$anyDirty;\n    });\n  },\n  $error: function $error() {\n    return this.$dirty && !this.$pending && this.$invalid;\n  },\n  $anyError: function $anyError() {\n    return this.$anyDirty && !this.$pending && this.$invalid;\n  },\n  $pending: function $pending() {\n    var _this4 = this;\n\n    return this.ruleKeys.some(function (key) {\n      return _this4.getRef(key).$pending;\n    }) || this.nestedKeys.some(function (key) {\n      return _this4.refProxy(key).$pending;\n    });\n  },\n  $params: function $params() {\n    var _this5 = this;\n\n    var vals = this.validations;\n    return _objectSpread({}, buildFromKeys(this.nestedKeys, function (key) {\n      return vals[key] && vals[key].$params || null;\n    }), buildFromKeys(this.ruleKeys, function (key) {\n      return _this5.getRef(key).$params;\n    }));\n  }\n};\n\nfunction setDirtyRecursive(newState) {\n  this.dirty = newState;\n  var proxy = this.proxy;\n  var method = newState ? '$touch' : '$reset';\n  this.nestedKeys.forEach(function (key) {\n    proxy[key][method]();\n  });\n}\n\nvar validationMethods = {\n  $touch: function $touch() {\n    setDirtyRecursive.call(this, true);\n  },\n  $reset: function $reset() {\n    setDirtyRecursive.call(this, false);\n  },\n  $flattenParams: function $flattenParams() {\n    var proxy = this.proxy;\n    var params = [];\n\n    for (var key in this.$params) {\n      if (this.isNested(key)) {\n        var childParams = proxy[key].$flattenParams();\n\n        for (var j = 0; j < childParams.length; j++) {\n          childParams[j].path.unshift(key);\n        }\n\n        params = params.concat(childParams);\n      } else {\n        params.push({\n          path: [],\n          name: key,\n          params: this.$params[key]\n        });\n      }\n    }\n\n    return params;\n  }\n};\nvar getterNames = Object.keys(validationGetters);\nvar methodNames = Object.keys(validationMethods);\nvar _cachedComponent = null;\n\nvar getComponent = function getComponent(Vue) {\n  if (_cachedComponent) {\n    return _cachedComponent;\n  }\n\n  var VBase = Vue.extend({\n    computed: {\n      refs: function refs() {\n        var oldVval = this._vval;\n        this._vval = this.children;\n        (0, _vval.patchChildren)(oldVval, this._vval);\n        var refs = {};\n\n        this._vval.forEach(function (c) {\n          refs[c.key] = c.vm;\n        });\n\n        return refs;\n      }\n    },\n    beforeCreate: function beforeCreate() {\n      this._vval = null;\n    },\n    beforeDestroy: function beforeDestroy() {\n      if (this._vval) {\n        (0, _vval.patchChildren)(this._vval);\n        this._vval = null;\n      }\n    },\n    methods: {\n      getModel: function getModel() {\n        return this.lazyModel ? this.lazyModel(this.prop) : this.model;\n      },\n      getModelKey: function getModelKey(key) {\n        var model = this.getModel();\n\n        if (model) {\n          return model[key];\n        }\n      },\n      hasIter: function hasIter() {\n        return false;\n      }\n    }\n  });\n  var ValidationRule = VBase.extend({\n    data: function data() {\n      return {\n        rule: null,\n        lazyModel: null,\n        model: null,\n        lazyParentModel: null,\n        rootModel: null\n      };\n    },\n    methods: {\n      runRule: function runRule(parent) {\n        var model = this.getModel();\n        (0, _params.pushParams)();\n        var rawOutput = this.rule.call(this.rootModel, model, parent);\n        var output = isPromise(rawOutput) ? makePendingAsyncVm(Vue, rawOutput) : rawOutput;\n        var rawParams = (0, _params.popParams)();\n        var params = rawParams && rawParams.$sub ? rawParams.$sub.length > 1 ? rawParams : rawParams.$sub[0] : null;\n        return {\n          output: output,\n          params: params\n        };\n      }\n    },\n    computed: {\n      run: function run() {\n        var _this6 = this;\n\n        var parent = this.lazyParentModel();\n\n        var isArrayDependant = Array.isArray(parent) && parent.__ob__;\n\n        if (isArrayDependant) {\n          var arrayDep = parent.__ob__.dep;\n          arrayDep.depend();\n          var target = arrayDep.constructor.target;\n\n          if (!this._indirectWatcher) {\n            var Watcher = target.constructor;\n            this._indirectWatcher = new Watcher(this, function () {\n              return _this6.runRule(parent);\n            }, null, {\n              lazy: true\n            });\n          }\n\n          var model = this.getModel();\n\n          if (!this._indirectWatcher.dirty && this._lastModel === model) {\n            this._indirectWatcher.depend();\n\n            return target.value;\n          }\n\n          this._lastModel = model;\n\n          this._indirectWatcher.evaluate();\n\n          this._indirectWatcher.depend();\n        } else if (this._indirectWatcher) {\n          this._indirectWatcher.teardown();\n\n          this._indirectWatcher = null;\n        }\n\n        return this._indirectWatcher ? this._indirectWatcher.value : this.runRule(parent);\n      },\n      $params: function $params() {\n        return this.run.params;\n      },\n      proxy: function proxy() {\n        var output = this.run.output;\n\n        if (output[__isVuelidateAsyncVm]) {\n          return !!output.v;\n        }\n\n        return !!output;\n      },\n      $pending: function $pending() {\n        var output = this.run.output;\n\n        if (output[__isVuelidateAsyncVm]) {\n          return output.p;\n        }\n\n        return false;\n      }\n    },\n    destroyed: function destroyed() {\n      if (this._indirectWatcher) {\n        this._indirectWatcher.teardown();\n\n        this._indirectWatcher = null;\n      }\n    }\n  });\n  var Validation = VBase.extend({\n    data: function data() {\n      return {\n        dirty: false,\n        validations: null,\n        lazyModel: null,\n        model: null,\n        prop: null,\n        lazyParentModel: null,\n        rootModel: null\n      };\n    },\n    methods: _objectSpread({}, validationMethods, {\n      refProxy: function refProxy(key) {\n        return this.getRef(key).proxy;\n      },\n      getRef: function getRef(key) {\n        return this.refs[key];\n      },\n      isNested: function isNested(key) {\n        return typeof this.validations[key] !== 'function';\n      }\n    }),\n    computed: _objectSpread({}, validationGetters, {\n      nestedKeys: function nestedKeys() {\n        return this.keys.filter(this.isNested);\n      },\n      ruleKeys: function ruleKeys() {\n        var _this7 = this;\n\n        return this.keys.filter(function (k) {\n          return !_this7.isNested(k);\n        });\n      },\n      keys: function keys() {\n        return Object.keys(this.validations).filter(function (k) {\n          return k !== '$params';\n        });\n      },\n      proxy: function proxy() {\n        var _this8 = this;\n\n        var keyDefs = buildFromKeys(this.keys, function (key) {\n          return {\n            enumerable: true,\n            configurable: true,\n            get: function get() {\n              return _this8.refProxy(key);\n            }\n          };\n        });\n        var getterDefs = buildFromKeys(getterNames, function (key) {\n          return {\n            enumerable: true,\n            configurable: true,\n            get: function get() {\n              return _this8[key];\n            }\n          };\n        });\n        var methodDefs = buildFromKeys(methodNames, function (key) {\n          return {\n            enumerable: false,\n            configurable: true,\n            get: function get() {\n              return _this8[key];\n            }\n          };\n        });\n        var iterDefs = this.hasIter() ? {\n          $iter: {\n            enumerable: true,\n            value: Object.defineProperties({}, _objectSpread({}, keyDefs))\n          }\n        } : {};\n        return Object.defineProperties({}, _objectSpread({}, keyDefs, iterDefs, {\n          $model: {\n            enumerable: true,\n            get: function get() {\n              var parent = _this8.lazyParentModel();\n\n              if (parent != null) {\n                return parent[_this8.prop];\n              } else {\n                return null;\n              }\n            },\n            set: function set(value) {\n              var parent = _this8.lazyParentModel();\n\n              if (parent != null) {\n                parent[_this8.prop] = value;\n\n                _this8.$touch();\n              }\n            }\n          }\n        }, getterDefs, methodDefs));\n      },\n      children: function children() {\n        var _this9 = this;\n\n        return _toConsumableArray(this.nestedKeys.map(function (key) {\n          return renderNested(_this9, key);\n        })).concat(_toConsumableArray(this.ruleKeys.map(function (key) {\n          return renderRule(_this9, key);\n        }))).filter(Boolean);\n      }\n    })\n  });\n  var GroupValidation = Validation.extend({\n    methods: {\n      isNested: function isNested(key) {\n        return typeof this.validations[key]() !== 'undefined';\n      },\n      getRef: function getRef(key) {\n        var vm = this;\n        return {\n          get proxy() {\n            return vm.validations[key]() || false;\n          }\n\n        };\n      }\n    }\n  });\n  var EachValidation = Validation.extend({\n    computed: {\n      keys: function keys() {\n        var model = this.getModel();\n\n        if (isObject(model)) {\n          return Object.keys(model);\n        } else {\n          return [];\n        }\n      },\n      tracker: function tracker() {\n        var _this10 = this;\n\n        var trackBy = this.validations.$trackBy;\n        return trackBy ? function (key) {\n          return \"\".concat(getPath(_this10.rootModel, _this10.getModelKey(key), trackBy));\n        } : function (x) {\n          return \"\".concat(x);\n        };\n      },\n      getModelLazy: function getModelLazy() {\n        var _this11 = this;\n\n        return function () {\n          return _this11.getModel();\n        };\n      },\n      children: function children() {\n        var _this12 = this;\n\n        var def = this.validations;\n        var model = this.getModel();\n\n        var validations = _objectSpread({}, def);\n\n        delete validations['$trackBy'];\n        var usedTracks = {};\n        return this.keys.map(function (key) {\n          var track = _this12.tracker(key);\n\n          if (usedTracks.hasOwnProperty(track)) {\n            return null;\n          }\n\n          usedTracks[track] = true;\n          return (0, _vval.h)(Validation, track, {\n            validations: validations,\n            prop: key,\n            lazyParentModel: _this12.getModelLazy,\n            model: model[key],\n            rootModel: _this12.rootModel\n          });\n        }).filter(Boolean);\n      }\n    },\n    methods: {\n      isNested: function isNested() {\n        return true;\n      },\n      getRef: function getRef(key) {\n        return this.refs[this.tracker(key)];\n      },\n      hasIter: function hasIter() {\n        return true;\n      }\n    }\n  });\n\n  var renderNested = function renderNested(vm, key) {\n    if (key === '$each') {\n      return (0, _vval.h)(EachValidation, key, {\n        validations: vm.validations[key],\n        lazyParentModel: vm.lazyParentModel,\n        prop: key,\n        lazyModel: vm.getModel,\n        rootModel: vm.rootModel\n      });\n    }\n\n    var validations = vm.validations[key];\n\n    if (Array.isArray(validations)) {\n      var root = vm.rootModel;\n      var refVals = buildFromKeys(validations, function (path) {\n        return function () {\n          return getPath(root, root.$v, path);\n        };\n      }, function (v) {\n        return Array.isArray(v) ? v.join('.') : v;\n      });\n      return (0, _vval.h)(GroupValidation, key, {\n        validations: refVals,\n        lazyParentModel: NIL,\n        prop: key,\n        lazyModel: NIL,\n        rootModel: root\n      });\n    }\n\n    return (0, _vval.h)(Validation, key, {\n      validations: validations,\n      lazyParentModel: vm.getModel,\n      prop: key,\n      lazyModel: vm.getModelKey,\n      rootModel: vm.rootModel\n    });\n  };\n\n  var renderRule = function renderRule(vm, key) {\n    return (0, _vval.h)(ValidationRule, key, {\n      rule: vm.validations[key],\n      lazyParentModel: vm.lazyParentModel,\n      lazyModel: vm.getModel,\n      rootModel: vm.rootModel\n    });\n  };\n\n  _cachedComponent = {\n    VBase: VBase,\n    Validation: Validation\n  };\n  return _cachedComponent;\n};\n\nvar _cachedVue = null;\n\nfunction getVue(rootVm) {\n  if (_cachedVue) return _cachedVue;\n  var Vue = rootVm.constructor;\n\n  while (Vue.super) {\n    Vue = Vue.super;\n  }\n\n  _cachedVue = Vue;\n  return Vue;\n}\n\nvar validateModel = function validateModel(model, validations) {\n  var Vue = getVue(model);\n\n  var _getComponent = getComponent(Vue),\n      Validation = _getComponent.Validation,\n      VBase = _getComponent.VBase;\n\n  var root = new VBase({\n    computed: {\n      children: function children() {\n        var vals = typeof validations === 'function' ? validations.call(model) : validations;\n        return [(0, _vval.h)(Validation, '$v', {\n          validations: vals,\n          lazyParentModel: NIL,\n          prop: '$v',\n          model: model,\n          rootModel: model\n        })];\n      }\n    }\n  });\n  return root;\n};\n\nvar validationMixin = {\n  data: function data() {\n    var vals = this.$options.validations;\n\n    if (vals) {\n      this._vuelidate = validateModel(this, vals);\n    }\n\n    return {};\n  },\n  beforeCreate: function beforeCreate() {\n    var options = this.$options;\n    var vals = options.validations;\n    if (!vals) return;\n    if (!options.computed) options.computed = {};\n    if (options.computed.$v) return;\n\n    options.computed.$v = function () {\n      return this._vuelidate ? this._vuelidate.refs.$v.proxy : null;\n    };\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this._vuelidate) {\n      this._vuelidate.$destroy();\n\n      this._vuelidate = null;\n    }\n  }\n};\nexports.validationMixin = validationMixin;\n\nfunction Vuelidate(Vue) {\n  Vue.mixin(validationMixin);\n}\n\nvar _default = Vuelidate;\nexports.default = _default;","<template>\n  <JsonSchemaForm\n    :schema=\"conditionedScheema\"\n    :ui-schema=\"uiSchema\"\n    :value=\"value\"\n    :validations=\"validationErrors\"\n    @input=\"handleChange\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue, Mixins, Provide } from 'vue-property-decorator'\nimport { processSchema } from '../utils/processSchema'\nimport { setValidators } from '../utils/setValidators'\nimport { unrefSchema } from '../utils/unrefSchema'\nimport { generateDefaultValue } from '../utils/generateDefaultValue'\nimport { processSchemaConditions } from '../utils/processConditions'\nimport { JSONSchema7 } from 'json-schema'\nimport { ISchema, IUiSchema, IAnyObject, ComponentsConfig,\n  WrapperComponentConfig, ErrorMessagesConfig, ISchemaBase, ISchemaObject } from '@/types'\nimport JsonSchemaForm from './JsonSchemaForm.vue'\nimport { validationMixin } from 'vuelidate'\nimport clone from 'nanoclone'\n// require('purecss/build/pure-min.css')\n\n@Component({\n  mixins: [validationMixin],\n  name: 'JsonSchema',\n  components: { JsonSchemaForm },\n  validations () {\n    return { value: setValidators((this as any).processedSchema) }\n  }\n})\nexport default class JsonSchema extends Vue {\n  @Prop({ required: true }) readonly schema!: JSONSchema7\n  @Prop() readonly uiSchema!: IUiSchema\n  @Prop({ default: () => ({}) }) readonly value!: IAnyObject\n  @Prop() readonly components!: ComponentsConfig\n  @Prop() readonly wrapperComponentConfig!: WrapperComponentConfig\n  @Prop() readonly errorMessagesConfig!: ErrorMessagesConfig\n\n  @Provide() componentsConfig = this.components\n  @Provide() wrapperComponent = this.wrapperComponentConfig\n\n  get validationErrors () {\n    return (this as any).$v.value\n  }\n\n  created () {\n    this.$emit('init-default', generateDefaultValue(this.processedSchema))\n  }\n\n  handleChange ({ path, value } : { path: Array<string>, value: any }) {\n    const newValue = { ...this.value }\n    const paramName = path.pop() || ''\n\n    let target = newValue\n    path.forEach(paramName => {\n      if (!target[paramName]) target[paramName] = {}\n      target = target[paramName]\n    })\n\n    target[paramName] = value\n\n    this.$emit('input', newValue)\n  }\n\n  get processedSchema () : ISchema {\n    return processSchema(this.schema)\n  }\n\n  get unreffedSchema () {\n    return unrefSchema(this.schema as ISchemaObject)\n  }\n\n  get conditionedScheema () : ISchema {\n    return processSchemaConditions(clone(this.unreffedSchema), this.value)\n  }\n}\n</script>\n","import clone from 'nanoclone'\nimport { ISchema, ISchemaObject, IDefinition } from '@/types'\nimport { JSONSchema7 } from 'json-schema'\n\nexport const unrefSchema = (schema: ISchemaObject) => {\n  function getSchemaByRef (ref: string) : ISchema {\n    const refName = ref.substring(ref.lastIndexOf('/') + 1)\n\n    if (!definitionNames.includes(refName)) console.warn(`[JSON-SCHEMA] Ref=\"${ref}\" not found in definitions`)\n\n    return !definitionNames.includes(refName) ? { type: 'string' } : clone(definitions[refName])\n  }\n\n  function checkSchemaForRefs (schema: ISchemaObject) : ISchemaObject {\n    const newSchema = { ...schema }\n\n    // unref properties\n    if (newSchema.properties) {\n      Object.keys(newSchema.properties).forEach(propertyName => {\n        if (newSchema.properties[propertyName].$ref) {\n          const definedSchema = getSchemaByRef(newSchema.properties[propertyName].$ref as string)\n\n          newSchema.properties[propertyName] = {\n            ...newSchema.properties[propertyName],\n            ...definedSchema\n          }\n        }\n\n        if (newSchema.properties[propertyName].type === 'array' &&\n          newSchema.properties[propertyName].items\n        ) {\n          // if (!newSchema.properties[propertyName].items) return\n          const definedSchema = newSchema.properties[propertyName] && newSchema.properties[propertyName].items && (newSchema.properties[propertyName].items as any).$ref\n            ? getSchemaByRef((newSchema.properties[propertyName].items as any).$ref as string)\n            : newSchema.properties[propertyName].items\n\n          ;(newSchema.properties[propertyName].items as any) = {\n            ...newSchema.properties[propertyName].items,\n            ...definedSchema\n          }\n\n          newSchema.properties[propertyName].items = checkSchemaForRefs(newSchema.properties[propertyName].items as ISchemaObject)\n        }\n\n        if (newSchema.properties[propertyName].type === 'object') {\n          newSchema.properties[propertyName] = checkSchemaForRefs(newSchema.properties[propertyName] as ISchemaObject)\n        }\n      })\n    }\n\n    // unref conditions\n    (newSchema.allOf || []).forEach(condition => {\n      if (condition.then && condition.then.properties) {\n        condition.then = checkSchemaForRefs(condition.then)\n      }\n    })\n\n    if (newSchema.then && newSchema.then.properties) {\n      newSchema.then = checkSchemaForRefs(newSchema.then)\n    }\n\n    return newSchema\n  }\n\n  const definitions : any = schema.definitions || {}\n  const definitionNames = Object.keys(definitions)\n  const dereferencedSchema = checkSchemaForRefs(schema)\n\n  delete dereferencedSchema.definitions\n\n  return dereferencedSchema\n}\n","<template>\n  <div id=\"app\">\n    <JsonSchema\n      class=\"schema\"\n      :schema=\"schema\"\n      :ui-schema=\"uiSchema\"\n      v-model=\"value\"\n    />\n    <pre>{{ formattedValue }}</pre>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator'\nimport JsonSchema from './JsonSchema'\n\nconst schema = {\n  type: 'object',\n  properties: {\n    aaa: { type: 'number', maximum: 10 },\n    arr: {\n      type: 'array',\n      items: { type: 'object', properties: { a: { type: 'string', minLength: 2 }, b: { type: 'boolean' } } }\n    },\n    bbb: { type: 'boolean' },\n    ccc: { type: 'string', enum: ['1', '2', '3'] },\n    ddd: {\n      type: 'object',\n      title: '',\n      properties: {\n        a1: { type: 'string', minLength: 1, maxLength: 5 },\n        b2: { type: 'boolean', default: true },\n        ddd: {\n          type: 'object',\n          properties: {\n            a1: { type: 'string', default: 'aaa' },\n            b2: { type: 'boolean' }\n          }\n        }\n      }\n    }\n  },\n  if: {\n    properties: {\n      aaa: {\n        const: 10\n      }\n    }\n  },\n  then: {\n    properties: {\n      newField: { type: 'string' }\n    }\n  }\n}\n\n@Component({\n  name: 'App',\n  components: { JsonSchema }\n})\nexport default class App extends Vue {\n  get schema () {\n    return schema\n  }\n\n  uiSchema = {\n    properties: {\n      ccc: { order: 1, uiType: 'radio', disabled: true },\n      ddd: {\n        properties: {\n          b2: { order: 2 },\n          ddd: { order: 1 }\n        }\n      }\n    }\n  }\n\n  value = {\n    arr: [{ a: 'qwerty', b: true }],\n    aaa: '123asd',\n    bbb: true,\n    ccc: 3\n  }\n\n  get formattedValue () : string {\n    return JSON.stringify(this.value, null, 2)\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  display: flex;\n  padding: 20px 0;\n}\n\n.schema {\n  margin-right: 100px;\n  width: 400px!important;\n}\n</style>\n","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')\n"],"names":["const","processSchema","schema","strippedSchema","Object","type","properties","entries","forEach","ref","propName","propSchema","items","_typeof","obj","Symbol","iterator","constructor","prototype","defineProperty","exports","value","root","window","global","withParams","vuelidate","paramsOrClosure","maybeValidator","undefined","_default","require$$0","enumerable","get","_withParams","default","__esModule","req","Array","isArray","length","Date","isNaN","getTime","_","String","keys","reference","vm","parentVm","call","expr","test","map","set","_common","min","len","max","setValidators","validations","property","propertyObject","minLength","minimum","required","maxLength","minValue","maximum","maxValue","$each","Map","Set","clone","src","baseClone","circulars","clones","nodeType","cloneNode","RegExp","from","values","push","create","key","idx","findIndex","i","isObject","item","processSchemaConditions","data","newSchema","allOf","condition","processCondition","if","every","requirment","checkRequierment","applyCondition","then","oneOf","some","let","currentPath","not","currentValue","currentParamName","console","warn","mergeDeep","target","sources","source","shift","assign","isUndef","v","isDef","sameVval","oldVval","vval","tag","createVm","Vm","args","createKeyToOldIdx","children","beginIdx","endIdx","addVvals","vvals","startIdx","removeVvals","ch","$destroy","patchVval","k","updateVval","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVval","oldEndVval","newEndIdx","newStartVval","newEndVval","updateChildren","_defineProperty","configurable","writable","pushParams","popParams","params","validator","withParamsClosure","add","_len","arguments","_key","apply","this","withParamsDirect","stack","lastTarget","newTarget","pop","$sub","addParams","Error","ownKeys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","_objectSpread","closure","_len2","_key2","x","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","toString","_iterableToArray","TypeError","_nonIterableSpread","Vuelidate","_params","NIL","buildFromKeys","fn","keyFn","reduce","build","isFunction","val","getPath","ctx","path","fallback","split","__isVuelidateAsyncVm","validationGetters","$invalid","_this","proxy","nestedKeys","nested","refProxy","ruleKeys","rule","$dirty","_this2","dirty","$anyDirty","_this3","$error","$pending","$anyError","_this4","getRef","$params","_this5","vals","setDirtyRecursive","newState","method","validationMethods","$touch","$reset","$flattenParams","isNested","childParams","j","unshift","name","getterNames","methodNames","_cachedComponent","getComponent","Vue","VBase","extend","computed","refs","_vval","patchChildren","c","beforeCreate","beforeDestroy","methods","getModel","lazyModel","prop","model","getModelKey","hasIter","ValidationRule","lazyParentModel","rootModel","runRule","parent","object","rawOutput","output","promise","asyncVm","p","error","makePendingAsyncVm","rawParams","run","_this6","__ob__","arrayDep","dep","depend","_indirectWatcher","Watcher","lazy","_lastModel","evaluate","teardown","destroyed","Validation","_this7","_this8","keyDefs","getterDefs","methodDefs","iterDefs","$iter","defineProperties","$model","_this9","renderNested","renderRule","Boolean","GroupValidation","EachValidation","tracker","_this10","trackBy","$trackBy","getModelLazy","_this11","_this12","def","usedTracks","track","hasOwnProperty","h","refVals","$v","join","_cachedVue","validateModel","rootVm","super","getVue","_getComponent","validationMixin","$options","_vuelidate","options","mixin","getSchemaByRef","refName","substring","lastIndexOf","definitionNames","includes","definitions","dereferencedSchema","checkSchemaForRefs","propertyName","$ref","definedSchema","definedSchema$1","config","productionTip","render","App","$mount"],"mappings":"yGAIOA,IAAMC,WAAiBC,GAC5BF,IAAMG,EAAuBC,iBACxBF,GACHG,KAAuB,SAAhBH,EAAOG,MAA6C,iBAAjBH,EAAOG,KAAuBH,EAAOG,KAAO,WAaxF,OAVIH,EAAOI,aACTH,EAAeG,WAAa,GAE5BF,OAAOG,QAAQL,EAAOI,YAAYE,kBAASC,qBACzCN,EAAeG,WAAWI,GAAYT,EAAcU,OAIpDT,EAAOU,QAAOT,EAAeS,MAAQX,EAAcC,EAAOU,QAEvDT,4UCbT,SAASU,EAAQC,GAAwT,OAAtOD,EAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,GALxVV,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,kBAAqB,EAIrB,IAAIE,EAAyB,oBAAXC,OAAyBA,YAA2B,IAAXC,EAAyBA,EAAS,GAUzFC,EAAaH,EAAKI,UAAYJ,EAAKI,UAAUD,WAR5B,SAAwBE,EAAiBC,GAC5D,MAAiC,WAA7Bf,EAAQc,SAAoDE,IAAnBD,EACpCA,EAGFD,GAAgB,gBAIzBP,aAAqBK,8CClBrBrB,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,eAAkB,EAClB,IACIU,EAD2CC,EAA+BN,WAE9EL,UAAkBU,iCCNlB1B,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETjB,OAAOe,eAAeC,EAAS,aAAc,CAC3CY,YAAY,EACZC,IAAK,WACH,OAAOC,EAAYC,WAGvBf,QAAgBA,MAAcA,MAAcA,WAAc,EAE1D,IAEgCN,EAF5BoB,GAE4BpB,EAFSiB,IAEYjB,EAAIsB,WAAatB,EAAM,CAAEqB,QAASrB,GAEvF,SAASD,EAAQC,GAAwT,OAAtOD,EAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,GAExV,IAAIuB,EAAM,SAAahB,GACrB,GAAIiB,MAAMC,QAAQlB,GAAQ,QAASA,EAAMmB,OAEzC,GAAInB,MAAAA,EACF,OAAO,EAGT,IAAc,IAAVA,EACF,OAAO,EAGT,GAAIA,aAAiBoB,KACnB,OAAQC,MAAMrB,EAAMsB,WAGtB,GAAuB,WAAnB9B,EAAQQ,GAAqB,CAC/B,IAAK,IAAIuB,KAAKvB,EACZ,OAAO,EAGT,OAAO,EAGT,QAASwB,OAAOxB,GAAOmB,QAGzBpB,MAAciB,EAYdjB,MAVU,SAAaC,GACrB,OAAIiB,MAAMC,QAAQlB,GAAeA,EAAMmB,OAEhB,WAAnB3B,EAAQQ,GACHjB,OAAO0C,KAAKzB,GAAOmB,OAGrBK,OAAOxB,GAAOmB,QASvBpB,MAJU,SAAa2B,EAAWC,EAAIC,GACpC,MAA4B,mBAAdF,EAA2BA,EAAUG,KAAKF,EAAIC,GAAYA,EAASF,IAanF3B,QARY,SAAef,EAAM8C,GAC/B,OAAO,EAAIjB,EAAYC,SAAS,CAC9B9B,KAAMA,IACL,SAAUgB,GACX,OAAQgB,EAAIhB,IAAU8B,EAAKC,KAAK/B,6CClEhCgC,EAIAC,uBCLJlD,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,eAAkB,EAIlB,IAAIU,GAAW,EAAIyB,EAAQ9B,YAAY,CACrCpB,KAAM,YACLkD,EAAQlB,KAEXjB,UAAkBU,2BCXlB1B,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,eAAkB,EAalBA,UATe,SAAkBoB,GAC/B,OAAO,EAAIe,EAAQ9B,YAAY,CAC7BpB,KAAM,YACNmD,IAAKhB,IACJ,SAAUnB,GACX,QAAQ,EAAIkC,EAAQlB,KAAKhB,KAAU,EAAIkC,EAAQE,KAAKpC,IAAUmB,+BCZlEpC,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,eAAkB,EAalBA,UATe,SAAkBoB,GAC/B,OAAO,EAAIe,EAAQ9B,YAAY,CAC7BpB,KAAM,YACNqD,IAAKlB,IACJ,SAAUnB,GACX,QAAQ,EAAIkC,EAAQlB,KAAKhB,KAAU,EAAIkC,EAAQE,KAAKpC,IAAUmB,+BCZlEpC,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,eAAkB,EAalBA,UATe,SAAkBoC,GAC/B,OAAO,EAAID,EAAQ9B,YAAY,CAC7BpB,KAAM,WACNmD,IAAKA,IACJ,SAAUnC,GACX,QAAQ,EAAIkC,EAAQlB,KAAKhB,MAAY,KAAK+B,KAAK/B,IAAUA,aAAiBoB,QAAUpB,IAAUmC,+BCZlGpD,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,eAAkB,EAalBA,UATe,SAAkBsC,GAC/B,OAAO,EAAIH,EAAQ9B,YAAY,CAC7BpB,KAAM,WACNqD,IAAKA,IACJ,SAAUrC,GACX,QAAQ,EAAIkC,EAAQlB,KAAKhB,MAAY,KAAK+B,KAAK/B,IAAUA,aAAiBoB,QAAUpB,IAAUqC,UCNrFC,WAAiBzD,GAC5BF,IAAM4D,EAAoB,GAuC1B,OArCI1D,EAAOI,YACTF,OAAO0C,KAAK5C,EAAOI,YAAYE,kBAASqD,GACtC7D,IAAM8D,EAAwB5D,EAAOI,WAAmBuD,GAExDD,EAAYC,GAAY,IAGK,WAAxBC,EAAezD,MAAqByD,EAAeC,WAC3B,WAAxBD,EAAezD,MAAqByD,EAAeE,SAC3B,YAAxBF,EAAezD,MAAsByD,EAAeE,SAC5B,UAAxBF,EAAezD,MAAoByD,EAAeC,aACrDH,EAAYC,GAAUI,SAAWA,GAG/BH,EAAeC,YAAWH,EAAYC,GAAUE,UAAYA,EAAUD,EAAeC,YAErFD,EAAeI,YAAWN,EAAYC,GAAUK,UAAYA,EAAUJ,EAAeI,YAErFJ,EAAeE,UAASJ,EAAYC,GAAUM,SAAWA,EAASL,EAAeE,UAEjFF,EAAeM,UAASR,EAAYC,GAAUQ,SAAWA,EAASP,EAAeM,UAGzD,WAAxBN,EAAezD,OAAmBuD,EAAYC,GAAYF,EAAcG,IAKhD,UAAxBA,EAAezD,MAAoByD,EAAelD,OAAuC,WAA9BkD,EAAelD,MAAMP,OAClFuD,EAAYC,GAAYzD,iBACnBwD,EAAYC,IACfS,MAAOX,EAAcG,EAAelD,aAMrCgD,GN5CT,IACEP,EAAMkB,IACN,MAAO3B,IAIT,IACEU,EAAMkB,IACN,MAAO5B,IAwDT,SAAS6B,EAAOC,GACd,OAvDF,SAASC,EAAWD,EAAKE,EAAWC,GAElC,IAAKH,GAAsB,iBAARA,GAAmC,mBAARA,EAC5C,OAAOA,EAIT,GAAIA,EAAII,UAAY,cAAeJ,EACjC,OAAOA,EAAIK,WAAU,GAIvB,GAAIL,aAAejC,KACjB,OAAO,IAAIA,KAAKiC,EAAI/B,WAItB,GAAI+B,aAAeM,OACjB,OAAO,IAAIA,OAAON,GAIpB,GAAIpC,MAAMC,QAAQmC,GAChB,OAAOA,EAAIrB,IAAIoB,GAIjB,GAAIpB,GAAOqB,aAAerB,EACxB,OAAO,IAAIkB,IAAIjC,MAAM2C,KAAKP,EAAInE,YAIhC,GAAI+C,GAAOoB,aAAepB,EACxB,OAAO,IAAIkB,IAAIlC,MAAM2C,KAAKP,EAAIQ,WAIhC,GAAIR,aAAetE,OAAQ,CACzBwE,EAAUO,KAAKT,GACf,IAAI5D,EAAMV,OAAOgF,OAAOV,GAExB,IAAK,IAAIW,KADTR,EAAOM,KAAKrE,GACI4D,EAAK,CACnB,IAAIY,EAAMV,EAAUW,WAAU,SAAUC,GACtC,OAAOA,IAAMd,EAAIW,MAEnBvE,EAAIuE,GAAOC,GAAO,EAAIT,EAAOS,GAAOX,EAAUD,EAAIW,GAAMT,EAAWC,GAErE,OAAO/D,EAIT,OAAO4D,EAIAC,CAAUD,EAAK,GAAI,IAG5B,MAAiBD,EOtEjB,SAASgB,EAAUC,GACjB,OAAQA,GAAwB,iBAATA,IAAsBpD,MAAMC,QAAQmD,GCuCtD1F,IAAM2F,WAA2BzF,EAAiB0F,GACvD5F,IAAM6F,EAAYzF,iBAAKF,GAcvB,OAZIA,EAAO4F,OACT5F,EAAO4F,MAAMtF,kBAAQuF,UAAaC,EAAiBD,EAAWH,EAAMC,MAGlE3F,EAAO+F,IAAID,EAAiB9F,EAA2B0F,EAAMC,GAEjEzF,OAAO0C,KAAK5C,EAAOI,YAAc,IAAIE,kBAAQqD,GACvC3D,EAAOI,YAAmD,WAArCJ,EAAOI,WAAWuD,GAAUxD,MAC/CwF,EAAUvF,YAAcsF,GAAQA,EAAK/B,KAAWgC,EAAUvF,WAAWuD,GAAY8B,EAAwBzF,EAAOI,WAAWuD,GAAW+B,EAAK/B,QAI5IgC,GAGHG,WAAoBD,EAA4BH,EAAkBC,GAElEE,EAAUE,GAAGH,MACKC,EAAUE,GAAGH,MAEjBI,gBAAOC,UAA+BC,EAAiBD,EAAYP,OACjFS,EAAeR,EAAWE,EAAUO,MAOpCP,EAAUE,GAAGM,MACKR,EAAUE,GAAGM,MAEjBC,eAAML,UAA+BC,EAAiBD,EAAYP,OAChFS,EAAeR,EAAWE,EAAUO,MAOpCF,EAAiBL,EAAUE,GAAIL,IAAOS,EAAeR,EAAWE,EAAUO,OAGnEF,WAAoBD,EAA4BP,kBAAmB,IAS9E,IAJAa,IAAIC,EAAcP,EAAWQ,IAAMR,EAAWQ,IAAIrG,WAAa6F,EAAW7F,WACtEsG,EAAehB,EACfiB,EAAmBzG,OAAO0C,KAAK4D,GAAa,GAEpB,UAArBG,GAAqD,cAArBA,GAAkC,CACvE,GAA2B,iBAAhBH,EAGT,OAFAI,QAAQC,KAAK,uCAAwCZ,IAE9C,EAKT,GAFAO,EAAcA,EAAYG,GAED,eAArBA,EAAmC,CACrC,GAA4B,iBAAjBD,EAGT,OAFAE,QAAQC,KAAK,uCAAwCZ,IAE9C,EAGTS,EAAeA,EAAaC,GAG9BA,EAAmBzG,OAAO0C,KAAK4D,GAAa,GAG9C,MAAyB,UAArBG,EACKV,EAAWQ,IAAMD,EAAY1G,QAAU4G,EAAeF,EAAY1G,QAAU4G,EAG5D,cAArBC,EACKV,EAAWQ,IACdD,EAAY3C,WAAa6C,GAAgB,IAAIpE,OAC7CkE,EAAY3C,YAAc6C,GAAgB,IAAIpE,YAHpD,GASI6D,WAAkBnG,EAAiBoG,GACvC,gBD9HcU,EAAWC,qEACzB,IAAKC,EAAQ1E,OAAQ,OAAOyE,EAC5BjH,IAAMmH,EAASD,EAAQE,QAEvB,GAAI3B,EAASwB,IAAWxB,EAAS0B,GAC/B,IAAKnH,IAAMqF,KAAO8B,EACZ1B,EAAS0B,EAAO9B,KACb4B,EAAO5B,IAAMjF,OAAOiH,OAAOJ,MAAQ,IAAG5B,GAAM,OACjD2B,EAAUC,EAAO5B,GAAM8B,EAAO9B,KAE9BjF,OAAOiH,OAAOJ,MAAQ,IAAG5B,GAAM8B,EAAO9B,OAK5C,OAAO2B,gBAAUC,UAAWC,IC+GrBF,CAAU9G,EAAQoG,uBC5H3B,SAASgB,EAAQC,GACf,OAAOA,MAAAA,EAGT,SAASC,EAAMD,GACb,OAAOA,MAAAA,EAGT,SAASE,EAASC,EAASC,GACzB,OAAOA,EAAKC,MAAQF,EAAQE,KAAOD,EAAKtC,MAAQqC,EAAQrC,IAG1D,SAASwC,EAASF,GAChB,IAAIG,EAAKH,EAAKC,IACdD,EAAK3E,GAAK,IAAI8E,EAAG,CACflC,KAAM+B,EAAKI,OAcf,SAASC,EAAkBC,EAAUC,EAAUC,GAC7C,IAAI3C,EAAGH,EACHhC,EAAM,GAEV,IAAKmC,EAAI0C,EAAU1C,GAAK2C,IAAU3C,EAE5BgC,EADJnC,EAAM4C,EAASzC,GAAGH,OACFhC,EAAIgC,GAAOG,GAG7B,OAAOnC,EAgET,SAAS+E,EAASC,EAAOC,EAAUH,GACjC,KAAOG,GAAYH,IAAUG,EAC3BT,EAASQ,EAAMC,IAInB,SAASC,EAAYF,EAAOC,EAAUH,GACpC,KAAOG,GAAYH,IAAUG,EAAU,CACrC,IAAIE,EAAKH,EAAMC,GAEXd,EAAMgB,KACRA,EAAGxF,GAAGyF,WACND,EAAGxF,GAAK,OAKd,SAAS0F,EAAUhB,EAASC,GACtBD,IAAYC,IAIhBA,EAAK3E,GAAK0E,EAAQ1E,GAzGpB,SAAoB2E,GAGlB,IAFA,IAAI7E,EAAO1C,OAAO0C,KAAK6E,EAAKI,MAEnBvC,EAAI,EAAGA,EAAI1C,EAAKN,OAAQgD,IAC/B1C,EAAKtC,SAAQ,SAAUmI,GACrBhB,EAAK3E,GAAG2F,GAAKhB,EAAKI,KAAKY,MAqG3BC,CAAWjB,IAnIbvH,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,gBAmIA,SAAuByH,EAAOL,GACxBhB,EAAMqB,IAAUrB,EAAMgB,GACpBK,IAAUL,GAzFlB,SAAwBK,EAAOC,GAC7B,IAQIC,EAAaC,EAAUC,EARvBC,EAAc,EACdC,EAAc,EACdC,EAAYP,EAAMrG,OAAS,EAC3B6G,EAAeR,EAAM,GACrBS,EAAaT,EAAMO,GACnBG,EAAYT,EAAMtG,OAAS,EAC3BgH,EAAeV,EAAM,GACrBW,EAAaX,EAAMS,GAGvB,KAAOL,GAAeE,GAAaD,GAAeI,GAC5CjC,EAAQ+B,GACVA,EAAeR,IAAQK,GACd5B,EAAQgC,GACjBA,EAAaT,IAAQO,GACZ3B,EAAS4B,EAAcG,IAChCd,EAAUW,EAAcG,GACxBH,EAAeR,IAAQK,GACvBM,EAAeV,IAAQK,IACd1B,EAAS6B,EAAYG,IAC9Bf,EAAUY,EAAYG,GACtBH,EAAaT,IAAQO,GACrBK,EAAaX,IAAQS,IACZ9B,EAAS4B,EAAcI,IAChCf,EAAUW,EAAcI,GACxBJ,EAAeR,IAAQK,GACvBO,EAAaX,IAAQS,IACZ9B,EAAS6B,EAAYE,IAC9Bd,EAAUY,EAAYE,GACtBF,EAAaT,IAAQO,GACrBI,EAAeV,IAAQK,KAEnB7B,EAAQyB,KAAcA,EAAcf,EAAkBa,EAAOK,EAAaE,IAG1E9B,EAFJ0B,EAAWxB,EAAMgC,EAAanE,KAAO0D,EAAYS,EAAanE,KAAO,OAGnEwC,EAAS2B,GACTA,EAAeV,IAAQK,IAInB1B,EAFJwB,EAAYJ,EAAMG,GAEMQ,IACtBd,EAAUO,EAAWO,GACrBX,EAAMG,QAAYnH,EAClB2H,EAAeV,IAAQK,KAEvBtB,EAAS2B,GACTA,EAAeV,IAAQK,KAM3BD,EAAcE,EAChBhB,EAASU,EAAOK,EAAaI,GACpBJ,EAAcI,GACvBhB,EAAYM,EAAOK,EAAaE,GAgCdM,CAAeb,EAAOL,GAC/BhB,EAAMgB,GACfJ,EAASI,EAAI,EAAGA,EAAGhG,OAAS,GACnBgF,EAAMqB,IACfN,EAAYM,EAAO,EAAGA,EAAMrG,OAAS,IAxIzCpB,IA4IA,SAAWwG,EAAKvC,EAAK0C,GACnB,MAAO,CACLH,IAAKA,EACLvC,IAAKA,EACL0C,KAAMA,uDC1IV,SAAS4B,EAAgB7I,EAAKuE,EAAKhE,GAAiK,OAApJgE,KAAOvE,EAAOV,OAAOe,eAAeL,EAAKuE,EAAK,CAAEhE,MAAOA,EAAOW,YAAY,EAAM4H,cAAc,EAAMC,UAAU,IAAkB/I,EAAIuE,GAAOhE,EAAgBP,EAE3M,SAASD,EAAQC,GAAwT,OAAtOD,EAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,GAZxVV,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,aAAqB0I,EACrB1I,YAAoB2I,EACpB3I,aAiFA,SAAoBO,EAAiBC,GACnC,GAAiC,WAA7Bf,EAAQc,SAAoDE,IAAnBD,EAC3C,OAjCJ,SAA0BoI,EAAQC,GAChC,OAAOC,GAAkB,SAAUC,GACjC,OAAO,2BACLA,EAAIH,GAEJ,IAAK,IAAII,EAAOC,UAAU7H,OAAQuF,EAAO,IAAIzF,MAAM8H,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAC/EvC,EAAKuC,GAAQD,EAAUC,GAGzB,OAAOL,EAAUM,MAAMC,KAAMzC,OAwBxB0C,CAAiB9I,EAAiBC,GAG3C,OAAOsI,EAAkBvI,IArF3BP,aAAqBA,cAAiB,EAQtC,IAAIsJ,EAAQ,GACRzD,EAAS,KACb7F,SAAiB6F,EAQjB,SAAS6C,IACQ,OAAX7C,GACFyD,EAAMvF,KAAK8B,GAGb7F,SAAiB6F,EAAS,GAG5B,SAAS8C,IACP,IAAIY,EAAa1D,EACb2D,EAAYxJ,SAAiB6F,EAASyD,EAAMG,OAAS,KAUzD,OARID,IACGtI,MAAMC,QAAQqI,EAAUE,QAC3BF,EAAUE,KAAO,IAGnBF,EAAUE,KAAK3F,KAAKwF,IAGfA,EAGT,SAASI,EAAUf,GACjB,GAAwB,WAApBnJ,EAAQmJ,IAAyB1H,MAAMC,QAAQyH,GAGjD,MAAM,IAAIgB,MAAM,4BAFhB5J,SAAiB6F,EAzCrB,SAAuBA,GAAU,oBAASzB,EAAI,EAAGA,EAAI6E,UAAU7H,OAAQgD,IAAK,CAAE,IAAI2B,EAAyB,MAAhBkD,EAAU7E,GAAa6E,EAAU7E,GAAK,GAAQyF,EAAU7K,OAAO0C,KAAKqE,GAAqD,mBAAjC/G,OAAO8K,wBAAwCD,EAAUA,EAAQE,OAAO/K,OAAO8K,sBAAsB/D,GAAQiE,QAAO,SAAUC,GAAO,OAAOjL,OAAOkL,yBAAyBnE,EAAQkE,GAAKrJ,gBAAmBiJ,EAAQzK,SAAQ,SAAU6E,GAAOsE,EAAgB1C,EAAQ5B,EAAK8B,EAAO9B,OAAa,OAAO4B,EAyC1bsE,CAAc,GAAItE,EAAQ+C,GAoBxD,SAASE,EAAkBsB,GACzB,IAAIvB,EAAYuB,EAAQT,GACxB,OAAO,2BACLjB,IAEA,IACE,IAAK,IAAI2B,EAAQpB,UAAU7H,OAAQuF,EAAO,IAAIzF,MAAMmJ,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpF3D,EAAK2D,GAASrB,EAAUqB,GAG1B,OAAOzB,EAAUM,MAAMC,KAAMzC,WAE7BgC,MA3DN3I,aAJiB,SAAoBuK,GACnCvK,SAAiB6F,EAAS0E,8FCH5B,SAASC,EAAmBC,GAAO,OAMnC,SAA4BA,GAAO,GAAIvJ,MAAMC,QAAQsJ,GAAM,CAAE,IAAK,IAAIrG,EAAI,EAAGsG,EAAO,IAAIxJ,MAAMuJ,EAAIrJ,QAASgD,EAAIqG,EAAIrJ,OAAQgD,IAAOsG,EAAKtG,GAAKqG,EAAIrG,GAAM,OAAOsG,GANnHC,CAAmBF,IAI7D,SAA0BG,GAAQ,GAAIjL,OAAOC,YAAYZ,OAAO4L,IAAkD,uBAAzC5L,OAAOc,UAAU+K,SAAS/I,KAAK8I,GAAgC,OAAO1J,MAAM2C,KAAK+G,GAJrFE,CAAiBL,IAEtF,WAAgC,MAAM,IAAIM,UAAU,mDAF0CC,GAQ9F,SAASb,EAActE,GAAU,oBAASzB,EAAI,EAAGA,EAAI6E,UAAU7H,OAAQgD,IAAK,CAAE,IAAI2B,EAAyB,MAAhBkD,EAAU7E,GAAa6E,EAAU7E,GAAK,GAAQyF,EAAU7K,OAAO0C,KAAKqE,GAAqD,mBAAjC/G,OAAO8K,wBAAwCD,EAAUA,EAAQE,OAAO/K,OAAO8K,sBAAsB/D,GAAQiE,QAAO,SAAUC,GAAO,OAAOjL,OAAOkL,yBAAyBnE,EAAQkE,GAAKrJ,gBAAmBiJ,EAAQzK,SAAQ,SAAU6E,GAAOsE,EAAgB1C,EAAQ5B,EAAK8B,EAAO9B,OAAa,OAAO4B,EAExd,SAAS0C,EAAgB7I,EAAKuE,EAAKhE,GAAiK,OAApJgE,KAAOvE,EAAOV,OAAOe,eAAeL,EAAKuE,EAAK,CAAEhE,MAAOA,EAAOW,YAAY,EAAM4H,cAAc,EAAMC,UAAU,IAAkB/I,EAAIuE,GAAOhE,EAAgBP,EAE3M,SAASD,EAAQC,GAAwT,OAAtOD,EAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,GA5BxVV,OAAOe,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,YAAoBiL,EACpBjM,OAAOe,eAAeC,EAAS,aAAc,CAC3CY,YAAY,EACZC,IAAK,WACH,OAAOqK,EAAQ7K,cAGnBL,UAAkBA,uBAA0B,EAoB5C,IAAImL,EAAM,WACR,OAAO,MAGLC,EAAgB,SAAuB1J,EAAM2J,EAAIC,GACnD,OAAO5J,EAAK6J,QAAO,SAAUC,EAAOvH,GAElC,OADAuH,EAAMF,EAAQA,EAAMrH,GAAOA,GAAOoH,EAAGpH,GAC9BuH,IACN,KAGL,SAASC,EAAWC,GAClB,MAAsB,mBAARA,EAGhB,SAASrH,EAASqH,GAChB,OAAe,OAARA,IAAkC,WAAjBjM,EAAQiM,IAAqBD,EAAWC,IAOlE,IAAIC,EAAU,SAAiBC,EAAKlM,EAAKmM,EAAMC,GAC7C,GAAoB,mBAATD,EACT,OAAOA,EAAK/J,KAAK8J,EAAKlM,EAAKoM,GAG7BD,EAAO3K,MAAMC,QAAQ0K,GAAQA,EAAOA,EAAKE,MAAM,KAE/C,IAAK,IAAI3H,EAAI,EAAGA,EAAIyH,EAAKzK,OAAQgD,IAAK,CACpC,IAAI1E,GAAwB,WAAjBD,EAAQC,GAGjB,OAAOoM,EAFPpM,EAAMA,EAAImM,EAAKzH,IAMnB,YAAsB,IAAR1E,EAAsBoM,EAAWpM,GAG7CsM,EAAuB,uBAqB3B,IAAIC,EAAoB,CACtBC,SAAU,WACR,IAAIC,EAAQ/C,KAERgD,EAAQhD,KAAKgD,MACjB,OAAOhD,KAAKiD,WAAWjH,MAAK,SAAUkH,GACpC,OAAOH,EAAMI,SAASD,GAAQJ,aAC1B9C,KAAKoD,SAASpH,MAAK,SAAUqH,GACjC,OAAQL,EAAMK,OAGlBC,OAAQ,WACN,IAAIC,EAASvD,KAEb,QAAIA,KAAKwD,OAIsB,IAA3BxD,KAAKiD,WAAWjL,QAIbgI,KAAKiD,WAAWvH,OAAM,SAAUb,GACrC,OAAO0I,EAAOJ,SAAStI,GAAKyI,WAGhCG,UAAW,WACT,IAAIC,EAAS1D,KAEb,QAAIA,KAAKwD,OAIsB,IAA3BxD,KAAKiD,WAAWjL,QAIbgI,KAAKiD,WAAWjH,MAAK,SAAUnB,GACpC,OAAO6I,EAAOP,SAAStI,GAAK4I,cAGhCE,OAAQ,WACN,OAAO3D,KAAKsD,SAAWtD,KAAK4D,UAAY5D,KAAK8C,UAE/Ce,UAAW,WACT,OAAO7D,KAAKyD,YAAczD,KAAK4D,UAAY5D,KAAK8C,UAElDc,SAAU,WACR,IAAIE,EAAS9D,KAEb,OAAOA,KAAKoD,SAASpH,MAAK,SAAUnB,GAClC,OAAOiJ,EAAOC,OAAOlJ,GAAK+I,aACtB5D,KAAKiD,WAAWjH,MAAK,SAAUnB,GACnC,OAAOiJ,EAAOX,SAAStI,GAAK+I,aAGhCI,QAAS,WACP,IAAIC,EAASjE,KAETkE,EAAOlE,KAAK5G,YAChB,OAAO2H,EAAc,GAAIiB,EAAchC,KAAKiD,YAAY,SAAUpI,GAChE,OAAOqJ,EAAKrJ,IAAQqJ,EAAKrJ,GAAKmJ,SAAW,QACvChC,EAAchC,KAAKoD,UAAU,SAAUvI,GACzC,OAAOoJ,EAAOF,OAAOlJ,GAAKmJ,cAKhC,SAASG,EAAkBC,GACzBpE,KAAKwD,MAAQY,EACb,IAAIpB,EAAQhD,KAAKgD,MACbqB,EAASD,EAAW,SAAW,SACnCpE,KAAKiD,WAAWjN,SAAQ,SAAU6E,GAChCmI,EAAMnI,GAAKwJ,QAIf,IAAIC,EAAoB,CACtBC,OAAQ,WACNJ,EAAkBzL,KAAKsH,MAAM,IAE/BwE,OAAQ,WACNL,EAAkBzL,KAAKsH,MAAM,IAE/ByE,eAAgB,WACd,IAAIzB,EAAQhD,KAAKgD,MACbxD,EAAS,GAEb,IAAK,IAAI3E,KAAOmF,KAAKgE,QACnB,GAAIhE,KAAK0E,SAAS7J,GAAM,CAGtB,IAFA,IAAI8J,EAAc3B,EAAMnI,GAAK4J,iBAEpBG,EAAI,EAAGA,EAAID,EAAY3M,OAAQ4M,IACtCD,EAAYC,GAAGnC,KAAKoC,QAAQhK,GAG9B2E,EAASA,EAAOmB,OAAOgE,QAEvBnF,EAAO7E,KAAK,CACV8H,KAAM,GACNqC,KAAMjK,EACN2E,OAAQQ,KAAKgE,QAAQnJ,KAK3B,OAAO2E,IAGPuF,EAAcnP,OAAO0C,KAAKuK,GAC1BmC,EAAcpP,OAAO0C,KAAKgM,GAC1BW,EAAmB,KAEnBC,EAAe,SAAsBC,GACvC,GAAIF,EACF,OAAOA,EAGT,IAAIG,EAAQD,EAAIE,OAAO,CACrBC,SAAU,CACRC,KAAM,WACJ,IAAIrI,EAAU8C,KAAKwF,MACnBxF,KAAKwF,MAAQxF,KAAKvC,UAClB,EAAI+H,EAAMC,eAAevI,EAAS8C,KAAKwF,OACvC,IAAID,EAAO,GAMX,OAJAvF,KAAKwF,MAAMxP,SAAQ,SAAU0P,GAC3BH,EAAKG,EAAE7K,KAAO6K,EAAElN,MAGX+M,IAGXI,aAAc,WACZ3F,KAAKwF,MAAQ,MAEfI,cAAe,WACT5F,KAAKwF,SACP,EAAIA,EAAMC,eAAezF,KAAKwF,OAC9BxF,KAAKwF,MAAQ,OAGjBK,QAAS,CACPC,SAAU,WACR,OAAO9F,KAAK+F,UAAY/F,KAAK+F,UAAU/F,KAAKgG,MAAQhG,KAAKiG,OAE3DC,YAAa,SAAqBrL,GAChC,IAAIoL,EAAQjG,KAAK8F,WAEjB,GAAIG,EACF,OAAOA,EAAMpL,IAGjBsL,QAAS,WACP,OAAO,MAITC,EAAiBhB,EAAMC,OAAO,CAChCjK,KAAM,WACJ,MAAO,CACLiI,KAAM,KACN0C,UAAW,KACXE,MAAO,KACPI,gBAAiB,KACjBC,UAAW,OAGfT,QAAS,CACPU,QAAS,SAAiBC,GACxB,IAAIP,EAAQjG,KAAK8F,YACjB,EAAIhE,EAAQxC,cACZ,IAvNWmH,EAuNPC,EAAY1G,KAAKqD,KAAK3K,KAAKsH,KAAKsG,UAAWL,EAAOO,GAClDG,EAvNH1L,EADUwL,EAwNYC,IAvNFrE,EAAWoE,EAAO3K,MAuB/C,SAA4BqJ,EAAKyB,GAC/B,IAAIC,EAAU,IAAI1B,EAAI,CACpB/J,KAAM,CACJ0L,GAAG,EACH/J,GAAG,KAYP,OATA6J,EAAQ9K,MAAK,SAAUjF,GACrBgQ,EAAQC,GAAI,EACZD,EAAQ9J,EAAIlG,KACX,SAAUkQ,GAGX,MAFAF,EAAQC,GAAI,EACZD,EAAQ9J,GAAI,EACNgK,KAERF,EAAQjE,IAAwB,EACzBiE,EAgLmCG,CAAmB7B,EAAKuB,GAAaA,EACrEO,GAAY,EAAInF,EAAQvC,aAE5B,MAAO,CACLoH,OAAQA,EACRnH,OAHWyH,GAAaA,EAAU3G,KAAO2G,EAAU3G,KAAKtI,OAAS,EAAIiP,EAAYA,EAAU3G,KAAK,GAAK,QAO3GgF,SAAU,CACR4B,IAAK,WACH,IAAIC,EAASnH,KAETwG,EAASxG,KAAKqG,kBAIlB,GAFuBvO,MAAMC,QAAQyO,IAAWA,EAAOY,OAEjC,CACpB,IAAIC,EAAWb,EAAOY,OAAOE,IAC7BD,EAASE,SACT,IAAI9K,EAAS4K,EAAS5Q,YAAYgG,OAElC,IAAKuD,KAAKwH,iBAAkB,CAC1B,IAAIC,EAAUhL,EAAOhG,YACrBuJ,KAAKwH,iBAAmB,IAAIC,EAAQzH,MAAM,WACxC,OAAOmH,EAAOZ,QAAQC,KACrB,KAAM,CACPkB,MAAM,IAIV,IAAIzB,EAAQjG,KAAK8F,WAEjB,IAAK9F,KAAKwH,iBAAiBhE,OAASxD,KAAK2H,aAAe1B,EAGtD,OAFAjG,KAAKwH,iBAAiBD,SAEf9K,EAAO5F,MAGhBmJ,KAAK2H,WAAa1B,EAElBjG,KAAKwH,iBAAiBI,WAEtB5H,KAAKwH,iBAAiBD,cACbvH,KAAKwH,mBACdxH,KAAKwH,iBAAiBK,WAEtB7H,KAAKwH,iBAAmB,MAG1B,OAAOxH,KAAKwH,iBAAmBxH,KAAKwH,iBAAiB3Q,MAAQmJ,KAAKuG,QAAQC,IAE5ExC,QAAS,WACP,OAAOhE,KAAKkH,IAAI1H,QAElBwD,MAAO,WACL,IAAI2D,EAAS3G,KAAKkH,IAAIP,OAEtB,OAAIA,EAAO/D,KACA+D,EAAO5J,IAGT4J,GAEX/C,SAAU,WACR,IAAI+C,EAAS3G,KAAKkH,IAAIP,OAEtB,QAAIA,EAAO/D,IACF+D,EAAOG,IAMpBgB,UAAW,WACL9H,KAAKwH,mBACPxH,KAAKwH,iBAAiBK,WAEtB7H,KAAKwH,iBAAmB,SAI1BO,EAAa3C,EAAMC,OAAO,CAC5BjK,KAAM,WACJ,MAAO,CACLoI,OAAO,EACPpK,YAAa,KACb2M,UAAW,KACXE,MAAO,KACPD,KAAM,KACNK,gBAAiB,KACjBC,UAAW,OAGfT,QAAS9E,EAAc,GAAIuD,EAAmB,CAC5CnB,SAAU,SAAkBtI,GAC1B,OAAOmF,KAAK+D,OAAOlJ,GAAKmI,OAE1Be,OAAQ,SAAgBlJ,GACtB,OAAOmF,KAAKuF,KAAK1K,IAEnB6J,SAAU,SAAkB7J,GAC1B,MAAwC,mBAA1BmF,KAAK5G,YAAYyB,MAGnCyK,SAAUvE,EAAc,GAAI8B,EAAmB,CAC7CI,WAAY,WACV,OAAOjD,KAAK1H,KAAKsI,OAAOZ,KAAK0E,WAE/BtB,SAAU,WACR,IAAI4E,EAAShI,KAEb,OAAOA,KAAK1H,KAAKsI,QAAO,SAAUzC,GAChC,OAAQ6J,EAAOtD,SAASvG,OAG5B7F,KAAM,WACJ,OAAO1C,OAAO0C,KAAK0H,KAAK5G,aAAawH,QAAO,SAAUzC,GACpD,MAAa,YAANA,MAGX6E,MAAO,WACL,IAAIiF,EAASjI,KAETkI,EAAUlG,EAAchC,KAAK1H,MAAM,SAAUuC,GAC/C,MAAO,CACLrD,YAAY,EACZ4H,cAAc,EACd3H,IAAK,WACH,OAAOwQ,EAAO9E,SAAStI,QAIzBsN,EAAanG,EAAc+C,GAAa,SAAUlK,GACpD,MAAO,CACLrD,YAAY,EACZ4H,cAAc,EACd3H,IAAK,WACH,OAAOwQ,EAAOpN,QAIhBuN,EAAapG,EAAcgD,GAAa,SAAUnK,GACpD,MAAO,CACLrD,YAAY,EACZ4H,cAAc,EACd3H,IAAK,WACH,OAAOwQ,EAAOpN,QAIhBwN,EAAWrI,KAAKmG,UAAY,CAC9BmC,MAAO,CACL9Q,YAAY,EACZX,MAAOjB,OAAO2S,iBAAiB,GAAIxH,EAAc,GAAImH,MAErD,GACJ,OAAOtS,OAAO2S,iBAAiB,GAAIxH,EAAc,GAAImH,EAASG,EAAU,CACtEG,OAAQ,CACNhR,YAAY,EACZC,IAAK,WACH,IAAI+O,EAASyB,EAAO5B,kBAEpB,OAAc,MAAVG,EACKA,EAAOyB,EAAOjC,MAEd,MAGXlN,IAAK,SAAajC,GAChB,IAAI2P,EAASyB,EAAO5B,kBAEN,MAAVG,IACFA,EAAOyB,EAAOjC,MAAQnP,EAEtBoR,EAAO1D,aAIZ4D,EAAYC,KAEjB3K,SAAU,WACR,IAAIgL,EAASzI,KAEb,OAAOoB,EAAmBpB,KAAKiD,WAAWpK,KAAI,SAAUgC,GACtD,OAAO6N,EAAaD,EAAQ5N,OAC1B8F,OAAOS,EAAmBpB,KAAKoD,SAASvK,KAAI,SAAUgC,GACxD,OAAO8N,EAAWF,EAAQ5N,QACvB+F,OAAOgI,cAIdC,EAAkBd,EAAW1C,OAAO,CACtCQ,QAAS,CACPnB,SAAU,SAAkB7J,GAC1B,YAA0C,IAA5BmF,KAAK5G,YAAYyB,MAEjCkJ,OAAQ,SAAgBlJ,GACtB,IAAIrC,EAAKwH,KACT,MAAO,CACLgD,YACE,OAAOxK,EAAGY,YAAYyB,OAAU,QAOtCiO,EAAiBf,EAAW1C,OAAO,CACrCC,SAAU,CACRhN,KAAM,WACJ,IAAI2N,EAAQjG,KAAK8F,WAEjB,OAAI7K,EAASgL,GACJrQ,OAAO0C,KAAK2N,GAEZ,IAGX8C,QAAS,WACP,IAAIC,EAAUhJ,KAEViJ,EAAUjJ,KAAK5G,YAAY8P,SAC/B,OAAOD,EAAU,SAAUpO,GACzB,MAAO,GAAG8F,OAAO4B,EAAQyG,EAAQ1C,UAAW0C,EAAQ9C,YAAYrL,GAAMoO,KACpE,SAAU9H,GACZ,MAAO,GAAGR,OAAOQ,KAGrBgI,aAAc,WACZ,IAAIC,EAAUpJ,KAEd,OAAO,WACL,OAAOoJ,EAAQtD,aAGnBrI,SAAU,WACR,IAAI4L,EAAUrJ,KAEVsJ,EAAMtJ,KAAK5G,YACX6M,EAAQjG,KAAK8F,WAEb1M,EAAc2H,EAAc,GAAIuI,UAE7BlQ,EAAsB,SAC7B,IAAImQ,EAAa,GACjB,OAAOvJ,KAAK1H,KAAKO,KAAI,SAAUgC,GAC7B,IAAI2O,EAAQH,EAAQN,QAAQlO,GAE5B,OAAI0O,EAAWE,eAAeD,GACrB,MAGTD,EAAWC,IAAS,GACb,EAAIhE,EAAMkE,GAAG3B,EAAYyB,EAAO,CACrCpQ,YAAaA,EACb4M,KAAMnL,EACNwL,gBAAiBgD,EAAQF,aACzBlD,MAAOA,EAAMpL,GACbyL,UAAW+C,EAAQ/C,gBAEpB1F,OAAOgI,WAGd/C,QAAS,CACPnB,SAAU,WACR,OAAO,GAETX,OAAQ,SAAgBlJ,GACtB,OAAOmF,KAAKuF,KAAKvF,KAAK+I,QAAQlO,KAEhCsL,QAAS,WACP,OAAO,MAKTuC,EAAe,SAAsBlQ,EAAIqC,GAC3C,GAAY,UAARA,EACF,OAAO,EAAI2K,EAAMkE,GAAGZ,EAAgBjO,EAAK,CACvCzB,YAAaZ,EAAGY,YAAYyB,GAC5BwL,gBAAiB7N,EAAG6N,gBACpBL,KAAMnL,EACNkL,UAAWvN,EAAGsN,SACdQ,UAAW9N,EAAG8N,YAIlB,IAAIlN,EAAcZ,EAAGY,YAAYyB,GAEjC,GAAI/C,MAAMC,QAAQqB,GAAc,CAC9B,IAAItC,EAAO0B,EAAG8N,UACVqD,EAAU3H,EAAc5I,GAAa,SAAUqJ,GACjD,OAAO,WACL,OAAOF,EAAQzL,EAAMA,EAAK8S,GAAInH,OAE/B,SAAU1F,GACX,OAAOjF,MAAMC,QAAQgF,GAAKA,EAAE8M,KAAK,KAAO9M,KAE1C,OAAO,EAAIyI,EAAMkE,GAAGb,EAAiBhO,EAAK,CACxCzB,YAAauQ,EACbtD,gBAAiBtE,EACjBiE,KAAMnL,EACNkL,UAAWhE,EACXuE,UAAWxP,IAIf,OAAO,EAAI0O,EAAMkE,GAAG3B,EAAYlN,EAAK,CACnCzB,YAAaA,EACbiN,gBAAiB7N,EAAGsN,SACpBE,KAAMnL,EACNkL,UAAWvN,EAAG0N,YACdI,UAAW9N,EAAG8N,aAIdqC,EAAa,SAAoBnQ,EAAIqC,GACvC,OAAO,EAAI2K,EAAMkE,GAAGtD,EAAgBvL,EAAK,CACvCwI,KAAM7K,EAAGY,YAAYyB,GACrBwL,gBAAiB7N,EAAG6N,gBACpBN,UAAWvN,EAAGsN,SACdQ,UAAW9N,EAAG8N,aAQlB,OAJArB,EAAmB,CACjBG,MAAOA,EACP2C,WAAYA,IAKZ+B,EAAa,KAcjB,IAAIC,EAAgB,SAAuB9D,EAAO7M,GAChD,IAAI+L,EAbN,SAAgB6E,GACd,GAAIF,EAAY,OAAOA,EAGvB,IAFA,IAAI3E,EAAM6E,EAAOvT,YAEV0O,EAAI8E,OACT9E,EAAMA,EAAI8E,MAIZ,OADAH,EAAa3E,EACNA,EAIG+E,CAAOjE,GAEbkE,EAAgBjF,EAAaC,GAC7B4C,EAAaoC,EAAcpC,WAiB/B,OAdW,IAAI3C,EAFH+E,EAAc/E,OAEL,CACnBE,SAAU,CACR7H,SAAU,WACR,IAAIyG,EAA8B,mBAAhB9K,EAA6BA,EAAYV,KAAKuN,GAAS7M,EACzE,MAAO,EAAC,EAAIoM,EAAMkE,GAAG3B,EAAY,KAAM,CACrC3O,YAAa8K,EACbmC,gBAAiBtE,EACjBiE,KAAM,KACNC,MAAOA,EACPK,UAAWL,UAQjBmE,EAAkB,CACpBhP,KAAM,WACJ,IAAI8I,EAAOlE,KAAKqK,SAASjR,YAMzB,OAJI8K,IACFlE,KAAKsK,WAAaP,EAAc/J,KAAMkE,IAGjC,IAETyB,aAAc,WACZ,IAAI4E,EAAUvK,KAAKqK,SACRE,EAAQnR,cAEdmR,EAAQjF,WAAUiF,EAAQjF,SAAW,IACtCiF,EAAQjF,SAASsE,KAErBW,EAAQjF,SAASsE,GAAK,WACpB,OAAO5J,KAAKsK,WAAatK,KAAKsK,WAAW/E,KAAKqE,GAAG5G,MAAQ,SAG7D4C,cAAe,WACT5F,KAAKsK,aACPtK,KAAKsK,WAAWrM,WAEhB+B,KAAKsK,WAAa,QAMxB,SAASzI,EAAUsD,GACjBA,EAAIqF,MAAMJ,GAHZxT,kBAA0BwT,EAM1B,IAAI9S,EAAWuK,EACfjL,UAAkBU,4DCjoBlB,6xBC7B4B5B,GAC1B,SAAS+U,EAAgBxU,GACvBT,IAAMkV,EAAUzU,EAAI0U,UAAU1U,EAAI2U,YAAY,KAAO,GAIrD,OAFKC,EAAgBC,SAASJ,IAAUpO,QAAQC,2BAA2BtG,gCAEnE4U,EAAgBC,SAASJ,GAAgCzQ,EAAM8Q,EAAYL,IAAvC,CAAE7U,KAAM,UAsDtDL,IAAMuV,EAAoBrV,EAAOqV,aAAe,GAC1CF,EAAkBjV,OAAO0C,KAAKyS,GAC9BC,EArDN,SAASC,EAAoBvV,GAC3BF,IAAM6F,EAAYzF,iBAAKF,GA+CvB,OA5CI2F,EAAUvF,YACZF,OAAO0C,KAAK+C,EAAUvF,YAAYE,kBAAQkV,GACxC,GAAI7P,EAAUvF,WAAWoV,GAAcC,KAAM,CAC3C3V,IAAM4V,EAAgBX,EAAepP,EAAUvF,WAAWoV,GAAcC,MAExE9P,EAAUvF,WAAWoV,GAAgBtV,iBAChCyF,EAAUvF,WAAWoV,GACxBE,GAIJ,GAAgD,UAA5C/P,EAAUvF,WAAWoV,GAAcrV,MACrCwF,EAAUvF,WAAWoV,GAAc9U,MACnC,CAEAZ,IAAM4V,EAAgB/P,EAAUvF,WAAWoV,IAAiB7P,EAAUvF,WAAWoV,GAAc9U,OAAUiF,EAAUvF,WAAWoV,GAAc9U,MAAc+U,KACtJV,EAAgBpP,EAAUvF,WAAWoV,GAAc9U,MAAc+U,MACjE9P,EAAUvF,WAAWoV,GAAc9U,MAErCiF,EAAUvF,WAAWoV,GAAc9U,MAAgBR,iBAChDyF,EAAUvF,WAAWoV,GAAc9U,MACtCiV,GAGFhQ,EAAUvF,WAAWoV,GAAc9U,MAAQ6U,EAAmB5P,EAAUvF,WAAWoV,GAAc9U,OAGnD,WAA5CiF,EAAUvF,WAAWoV,GAAcrV,OACrCwF,EAAUvF,WAAWoV,GAAgBD,EAAmB5P,EAAUvF,WAAWoV,SAMlF7P,EAAUC,OAAS,IAAItF,kBAAQuF,GAC1BA,EAAUO,MAAQP,EAAUO,KAAKhG,aACnCyF,EAAUO,KAAOmP,EAAmB1P,EAAUO,UAI9CT,EAAUS,MAAQT,EAAUS,KAAKhG,aACnCuF,EAAUS,KAAOmP,EAAmB5P,EAAUS,OAGzCT,EAKkB4P,CAAmBvV,GAI9C,cAFOsV,EAAmBD,YAEnBC,+9CCVT,2tCCzDA7F,EAAImG,OAAOC,eAAgB,EAE3B,IAAIpG,EAAI,CACNqG,gBAAQ9B,UAAKA,EAAE+B,MACdC,OAAO"}