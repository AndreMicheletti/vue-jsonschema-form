{"version":3,"file":"main.js","sources":["../src/utils/processSchema.ts","../node_modules/vuelidate/lib/withParamsBrowser.js","../node_modules/vuelidate/lib/withParams.js","../node_modules/vuelidate/lib/validators/common.js","../node_modules/vuelidate/lib/validators/required.js","../node_modules/vuelidate/lib/validators/minLength.js","../node_modules/vuelidate/lib/validators/maxLength.js","../node_modules/vuelidate/lib/validators/minValue.js","../node_modules/vuelidate/lib/validators/maxValue.js","../src/utils/setValidators.ts","../node_modules/vuelidate/lib/vval.js","../node_modules/vuelidate/lib/params.js","../node_modules/vuelidate/lib/index.js","../src/JsonSchema/JsonSchema.vue","../src/App.vue","../src/main.ts"],"sourcesContent":["import { JSONSchema7 } from 'json-schema'\nimport { ISchema, IUiSchema, ComponentsConfig } from '@/types'\nimport { getComponent } from './getComponent'\n\nexport const processSchema = (schema: JSONSchema7) : ISchema => {\n  const { title, description, items, minLength, maxLength, minimum, maximum } = schema\n\n  const strippedSchema : any = {\n    ...schema,\n    type: (schema.type !== 'null' && ((typeof schema.type) !== 'object')) ? schema.type : 'string'\n  }\n  // Object.keys(strippedSchema).forEach(key => strippedSchema[key] === undefined && delete strippedSchema[key])\n\n  if (schema.properties) {\n    strippedSchema.properties = {}\n\n    Object.entries(schema.properties).forEach(([propName, propSchema]) => {\n      strippedSchema.properties[propName] = processSchema(propSchema as JSONSchema7)\n    })\n  }\n\n  if (schema.items) strippedSchema.items = processSchema(schema.items as JSONSchema7)\n\n  return strippedSchema\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.withParams = void 0;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar root = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : {};\n\nvar fakeWithParams = function fakeWithParams(paramsOrClosure, maybeValidator) {\n  if (_typeof(paramsOrClosure) === 'object' && maybeValidator !== undefined) {\n    return maybeValidator;\n  }\n\n  return paramsOrClosure(function () {});\n};\n\nvar withParams = root.vuelidate ? root.vuelidate.withParams : fakeWithParams;\nexports.withParams = withParams;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar withParams = process.env.BUILD === 'web' ? require('./withParamsBrowser').withParams : require('./params').withParams;\nvar _default = withParams;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"withParams\", {\n  enumerable: true,\n  get: function get() {\n    return _withParams.default;\n  }\n});\nexports.regex = exports.ref = exports.len = exports.req = void 0;\n\nvar _withParams = _interopRequireDefault(require(\"../withParams\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar req = function req(value) {\n  if (Array.isArray(value)) return !!value.length;\n\n  if (value === undefined || value === null) {\n    return false;\n  }\n\n  if (value === false) {\n    return true;\n  }\n\n  if (value instanceof Date) {\n    return !isNaN(value.getTime());\n  }\n\n  if (_typeof(value) === 'object') {\n    for (var _ in value) {\n      return true;\n    }\n\n    return false;\n  }\n\n  return !!String(value).length;\n};\n\nexports.req = req;\n\nvar len = function len(value) {\n  if (Array.isArray(value)) return value.length;\n\n  if (_typeof(value) === 'object') {\n    return Object.keys(value).length;\n  }\n\n  return String(value).length;\n};\n\nexports.len = len;\n\nvar ref = function ref(reference, vm, parentVm) {\n  return typeof reference === 'function' ? reference.call(vm, parentVm) : parentVm[reference];\n};\n\nexports.ref = ref;\n\nvar regex = function regex(type, expr) {\n  return (0, _withParams.default)({\n    type: type\n  }, function (value) {\n    return !req(value) || expr.test(value);\n  });\n};\n\nexports.regex = regex;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = (0, _common.withParams)({\n  type: 'required'\n}, _common.req);\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = function _default(length) {\n  return (0, _common.withParams)({\n    type: 'minLength',\n    min: length\n  }, function (value) {\n    return !(0, _common.req)(value) || (0, _common.len)(value) >= length;\n  });\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = function _default(length) {\n  return (0, _common.withParams)({\n    type: 'maxLength',\n    max: length\n  }, function (value) {\n    return !(0, _common.req)(value) || (0, _common.len)(value) <= length;\n  });\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = function _default(min) {\n  return (0, _common.withParams)({\n    type: 'minValue',\n    min: min\n  }, function (value) {\n    return !(0, _common.req)(value) || (!/\\s/.test(value) || value instanceof Date) && +value >= +min;\n  });\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _common = require(\"./common\");\n\nvar _default = function _default(max) {\n  return (0, _common.withParams)({\n    type: 'maxValue',\n    max: max\n  }, function (value) {\n    return !(0, _common.req)(value) || (!/\\s/.test(value) || value instanceof Date) && +value <= +max;\n  });\n};\n\nexports.default = _default;","// import { required, minLength, maxLength, minValue, maxValue } from 'vuelidate/lib/validators'\nimport required from 'vuelidate/lib/validators/required'\nimport minLength from 'vuelidate/lib/validators/minLength'\nimport maxLength from 'vuelidate/lib/validators/maxLength'\nimport minValue from 'vuelidate/lib/validators/minValue'\nimport maxValue from 'vuelidate/lib/validators/maxValue'\n// import { withParams } from 'vuelidate'\n\nimport { ISchema } from '@/types'\n\n// const correctPhone = (valueToCompare: any) => {\n//   const regexp = RegExp('^(\\\\+\\\\d{1,3}|\\\\d)?(\\\\s\\\\d{3,5}\\\\s)(\\\\d{1,3}[-]\\\\d{2}[-]\\\\d{2})$')\n\n//   return withParams({ type: 'phone', value: valueToCompare }, (value: any) => regexp.test(value))\n// }\n\nexport const setValidators = (schema: ISchema) : any => {\n  const validations : any = {}\n\n  if (schema.properties) {\n    Object.keys(schema.properties).forEach((property) => {\n      const propertyObject : any = schema.properties ? schema.properties[property] : {}\n\n      validations[property] = {}\n\n      // requireds\n      if ((propertyObject.type === 'string' && propertyObject.minLength) ||\n          (propertyObject.type === 'number' && propertyObject.minimum) ||\n          (propertyObject.type === 'integer' && propertyObject.minimum) ||\n          (propertyObject.type === 'array' && propertyObject.minLength)) {\n        validations[property].required = required\n      }\n\n      if (propertyObject.minLength) validations[property].minLength = minLength(propertyObject.minLength)\n\n      if (propertyObject.maxLength) validations[property].maxLength = maxLength(propertyObject.maxLength)\n\n      if (propertyObject.minimum) validations[property].minValue = minValue(propertyObject.minimum)\n\n      if (propertyObject.maximum) validations[property].maxValue = maxValue(propertyObject.maximum)\n\n      // set nested validators\n      if (propertyObject.type === 'object') validations[property] = setValidators(propertyObject)\n\n      // if (propertyObject.format === 'phone') validations[property].phone = correctPhone(propertyObject)\n\n      // set item validators for array of objects\n      if (propertyObject.type === 'array' && propertyObject.items && propertyObject.items.type === 'object') {\n        validations[property] = {\n          ...validations[property],\n          $each: setValidators(propertyObject.items)\n        }\n      }\n    })\n  }\n\n  return validations\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.patchChildren = patchChildren;\nexports.h = h;\n\nfunction isUndef(v) {\n  return v === null || v === undefined;\n}\n\nfunction isDef(v) {\n  return v !== null && v !== undefined;\n}\n\nfunction sameVval(oldVval, vval) {\n  return vval.tag === oldVval.tag && vval.key === oldVval.key;\n}\n\nfunction createVm(vval) {\n  var Vm = vval.tag;\n  vval.vm = new Vm({\n    data: vval.args\n  });\n}\n\nfunction updateVval(vval) {\n  var keys = Object.keys(vval.args);\n\n  for (var i = 0; i < keys.length; i++) {\n    keys.forEach(function (k) {\n      vval.vm[k] = vval.args[k];\n    });\n  }\n}\n\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n  var i, key;\n  var map = {};\n\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) map[key] = i;\n  }\n\n  return map;\n}\n\nfunction updateChildren(oldCh, newCh) {\n  var oldStartIdx = 0;\n  var newStartIdx = 0;\n  var oldEndIdx = oldCh.length - 1;\n  var oldStartVval = oldCh[0];\n  var oldEndVval = oldCh[oldEndIdx];\n  var newEndIdx = newCh.length - 1;\n  var newStartVval = newCh[0];\n  var newEndVval = newCh[newEndIdx];\n  var oldKeyToIdx, idxInOld, elmToMove;\n\n  while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n    if (isUndef(oldStartVval)) {\n      oldStartVval = oldCh[++oldStartIdx];\n    } else if (isUndef(oldEndVval)) {\n      oldEndVval = oldCh[--oldEndIdx];\n    } else if (sameVval(oldStartVval, newStartVval)) {\n      patchVval(oldStartVval, newStartVval);\n      oldStartVval = oldCh[++oldStartIdx];\n      newStartVval = newCh[++newStartIdx];\n    } else if (sameVval(oldEndVval, newEndVval)) {\n      patchVval(oldEndVval, newEndVval);\n      oldEndVval = oldCh[--oldEndIdx];\n      newEndVval = newCh[--newEndIdx];\n    } else if (sameVval(oldStartVval, newEndVval)) {\n      patchVval(oldStartVval, newEndVval);\n      oldStartVval = oldCh[++oldStartIdx];\n      newEndVval = newCh[--newEndIdx];\n    } else if (sameVval(oldEndVval, newStartVval)) {\n      patchVval(oldEndVval, newStartVval);\n      oldEndVval = oldCh[--oldEndIdx];\n      newStartVval = newCh[++newStartIdx];\n    } else {\n      if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n      idxInOld = isDef(newStartVval.key) ? oldKeyToIdx[newStartVval.key] : null;\n\n      if (isUndef(idxInOld)) {\n        createVm(newStartVval);\n        newStartVval = newCh[++newStartIdx];\n      } else {\n        elmToMove = oldCh[idxInOld];\n\n        if (sameVval(elmToMove, newStartVval)) {\n          patchVval(elmToMove, newStartVval);\n          oldCh[idxInOld] = undefined;\n          newStartVval = newCh[++newStartIdx];\n        } else {\n          createVm(newStartVval);\n          newStartVval = newCh[++newStartIdx];\n        }\n      }\n    }\n  }\n\n  if (oldStartIdx > oldEndIdx) {\n    addVvals(newCh, newStartIdx, newEndIdx);\n  } else if (newStartIdx > newEndIdx) {\n    removeVvals(oldCh, oldStartIdx, oldEndIdx);\n  }\n}\n\nfunction addVvals(vvals, startIdx, endIdx) {\n  for (; startIdx <= endIdx; ++startIdx) {\n    createVm(vvals[startIdx]);\n  }\n}\n\nfunction removeVvals(vvals, startIdx, endIdx) {\n  for (; startIdx <= endIdx; ++startIdx) {\n    var ch = vvals[startIdx];\n\n    if (isDef(ch)) {\n      ch.vm.$destroy();\n      ch.vm = null;\n    }\n  }\n}\n\nfunction patchVval(oldVval, vval) {\n  if (oldVval === vval) {\n    return;\n  }\n\n  vval.vm = oldVval.vm;\n  updateVval(vval);\n}\n\nfunction patchChildren(oldCh, ch) {\n  if (isDef(oldCh) && isDef(ch)) {\n    if (oldCh !== ch) updateChildren(oldCh, ch);\n  } else if (isDef(ch)) {\n    addVvals(ch, 0, ch.length - 1);\n  } else if (isDef(oldCh)) {\n    removeVvals(oldCh, 0, oldCh.length - 1);\n  }\n}\n\nfunction h(tag, key, args) {\n  return {\n    tag: tag,\n    key: key,\n    args: args\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pushParams = pushParams;\nexports.popParams = popParams;\nexports.withParams = withParams;\nexports._setTarget = exports.target = void 0;\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar stack = [];\nvar target = null;\nexports.target = target;\n\nvar _setTarget = function _setTarget(x) {\n  exports.target = target = x;\n};\n\nexports._setTarget = _setTarget;\n\nfunction pushParams() {\n  if (target !== null) {\n    stack.push(target);\n  }\n\n  exports.target = target = {};\n}\n\nfunction popParams() {\n  var lastTarget = target;\n  var newTarget = exports.target = target = stack.pop() || null;\n\n  if (newTarget) {\n    if (!Array.isArray(newTarget.$sub)) {\n      newTarget.$sub = [];\n    }\n\n    newTarget.$sub.push(lastTarget);\n  }\n\n  return lastTarget;\n}\n\nfunction addParams(params) {\n  if (_typeof(params) === 'object' && !Array.isArray(params)) {\n    exports.target = target = _objectSpread({}, target, params);\n  } else {\n    throw new Error('params must be an object');\n  }\n}\n\nfunction withParamsDirect(params, validator) {\n  return withParamsClosure(function (add) {\n    return function () {\n      add(params);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return validator.apply(this, args);\n    };\n  });\n}\n\nfunction withParamsClosure(closure) {\n  var validator = closure(addParams);\n  return function () {\n    pushParams();\n\n    try {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return validator.apply(this, args);\n    } finally {\n      popParams();\n    }\n  };\n}\n\nfunction withParams(paramsOrClosure, maybeValidator) {\n  if (_typeof(paramsOrClosure) === 'object' && maybeValidator !== undefined) {\n    return withParamsDirect(paramsOrClosure, maybeValidator);\n  }\n\n  return withParamsClosure(paramsOrClosure);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Vuelidate = Vuelidate;\nObject.defineProperty(exports, \"withParams\", {\n  enumerable: true,\n  get: function get() {\n    return _params.withParams;\n  }\n});\nexports.default = exports.validationMixin = void 0;\n\nvar _vval = require(\"./vval\");\n\nvar _params = require(\"./params\");\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar NIL = function NIL() {\n  return null;\n};\n\nvar buildFromKeys = function buildFromKeys(keys, fn, keyFn) {\n  return keys.reduce(function (build, key) {\n    build[keyFn ? keyFn(key) : key] = fn(key);\n    return build;\n  }, {});\n};\n\nfunction isFunction(val) {\n  return typeof val === 'function';\n}\n\nfunction isObject(val) {\n  return val !== null && (_typeof(val) === 'object' || isFunction(val));\n}\n\nfunction isPromise(object) {\n  return isObject(object) && isFunction(object.then);\n}\n\nvar getPath = function getPath(ctx, obj, path, fallback) {\n  if (typeof path === 'function') {\n    return path.call(ctx, obj, fallback);\n  }\n\n  path = Array.isArray(path) ? path : path.split('.');\n\n  for (var i = 0; i < path.length; i++) {\n    if (obj && _typeof(obj) === 'object') {\n      obj = obj[path[i]];\n    } else {\n      return fallback;\n    }\n  }\n\n  return typeof obj === 'undefined' ? fallback : obj;\n};\n\nvar __isVuelidateAsyncVm = '__isVuelidateAsyncVm';\n\nfunction makePendingAsyncVm(Vue, promise) {\n  var asyncVm = new Vue({\n    data: {\n      p: true,\n      v: false\n    }\n  });\n  promise.then(function (value) {\n    asyncVm.p = false;\n    asyncVm.v = value;\n  }, function (error) {\n    asyncVm.p = false;\n    asyncVm.v = false;\n    throw error;\n  });\n  asyncVm[__isVuelidateAsyncVm] = true;\n  return asyncVm;\n}\n\nvar validationGetters = {\n  $invalid: function $invalid() {\n    var _this = this;\n\n    var proxy = this.proxy;\n    return this.nestedKeys.some(function (nested) {\n      return _this.refProxy(nested).$invalid;\n    }) || this.ruleKeys.some(function (rule) {\n      return !proxy[rule];\n    });\n  },\n  $dirty: function $dirty() {\n    var _this2 = this;\n\n    if (this.dirty) {\n      return true;\n    }\n\n    if (this.nestedKeys.length === 0) {\n      return false;\n    }\n\n    return this.nestedKeys.every(function (key) {\n      return _this2.refProxy(key).$dirty;\n    });\n  },\n  $anyDirty: function $anyDirty() {\n    var _this3 = this;\n\n    if (this.dirty) {\n      return true;\n    }\n\n    if (this.nestedKeys.length === 0) {\n      return false;\n    }\n\n    return this.nestedKeys.some(function (key) {\n      return _this3.refProxy(key).$anyDirty;\n    });\n  },\n  $error: function $error() {\n    return this.$dirty && !this.$pending && this.$invalid;\n  },\n  $anyError: function $anyError() {\n    return this.$anyDirty && !this.$pending && this.$invalid;\n  },\n  $pending: function $pending() {\n    var _this4 = this;\n\n    return this.ruleKeys.some(function (key) {\n      return _this4.getRef(key).$pending;\n    }) || this.nestedKeys.some(function (key) {\n      return _this4.refProxy(key).$pending;\n    });\n  },\n  $params: function $params() {\n    var _this5 = this;\n\n    var vals = this.validations;\n    return _objectSpread({}, buildFromKeys(this.nestedKeys, function (key) {\n      return vals[key] && vals[key].$params || null;\n    }), buildFromKeys(this.ruleKeys, function (key) {\n      return _this5.getRef(key).$params;\n    }));\n  }\n};\n\nfunction setDirtyRecursive(newState) {\n  this.dirty = newState;\n  var proxy = this.proxy;\n  var method = newState ? '$touch' : '$reset';\n  this.nestedKeys.forEach(function (key) {\n    proxy[key][method]();\n  });\n}\n\nvar validationMethods = {\n  $touch: function $touch() {\n    setDirtyRecursive.call(this, true);\n  },\n  $reset: function $reset() {\n    setDirtyRecursive.call(this, false);\n  },\n  $flattenParams: function $flattenParams() {\n    var proxy = this.proxy;\n    var params = [];\n\n    for (var key in this.$params) {\n      if (this.isNested(key)) {\n        var childParams = proxy[key].$flattenParams();\n\n        for (var j = 0; j < childParams.length; j++) {\n          childParams[j].path.unshift(key);\n        }\n\n        params = params.concat(childParams);\n      } else {\n        params.push({\n          path: [],\n          name: key,\n          params: this.$params[key]\n        });\n      }\n    }\n\n    return params;\n  }\n};\nvar getterNames = Object.keys(validationGetters);\nvar methodNames = Object.keys(validationMethods);\nvar _cachedComponent = null;\n\nvar getComponent = function getComponent(Vue) {\n  if (_cachedComponent) {\n    return _cachedComponent;\n  }\n\n  var VBase = Vue.extend({\n    computed: {\n      refs: function refs() {\n        var oldVval = this._vval;\n        this._vval = this.children;\n        (0, _vval.patchChildren)(oldVval, this._vval);\n        var refs = {};\n\n        this._vval.forEach(function (c) {\n          refs[c.key] = c.vm;\n        });\n\n        return refs;\n      }\n    },\n    beforeCreate: function beforeCreate() {\n      this._vval = null;\n    },\n    beforeDestroy: function beforeDestroy() {\n      if (this._vval) {\n        (0, _vval.patchChildren)(this._vval);\n        this._vval = null;\n      }\n    },\n    methods: {\n      getModel: function getModel() {\n        return this.lazyModel ? this.lazyModel(this.prop) : this.model;\n      },\n      getModelKey: function getModelKey(key) {\n        var model = this.getModel();\n\n        if (model) {\n          return model[key];\n        }\n      },\n      hasIter: function hasIter() {\n        return false;\n      }\n    }\n  });\n  var ValidationRule = VBase.extend({\n    data: function data() {\n      return {\n        rule: null,\n        lazyModel: null,\n        model: null,\n        lazyParentModel: null,\n        rootModel: null\n      };\n    },\n    methods: {\n      runRule: function runRule(parent) {\n        var model = this.getModel();\n        (0, _params.pushParams)();\n        var rawOutput = this.rule.call(this.rootModel, model, parent);\n        var output = isPromise(rawOutput) ? makePendingAsyncVm(Vue, rawOutput) : rawOutput;\n        var rawParams = (0, _params.popParams)();\n        var params = rawParams && rawParams.$sub ? rawParams.$sub.length > 1 ? rawParams : rawParams.$sub[0] : null;\n        return {\n          output: output,\n          params: params\n        };\n      }\n    },\n    computed: {\n      run: function run() {\n        var _this6 = this;\n\n        var parent = this.lazyParentModel();\n\n        var isArrayDependant = Array.isArray(parent) && parent.__ob__;\n\n        if (isArrayDependant) {\n          var arrayDep = parent.__ob__.dep;\n          arrayDep.depend();\n          var target = arrayDep.constructor.target;\n\n          if (!this._indirectWatcher) {\n            var Watcher = target.constructor;\n            this._indirectWatcher = new Watcher(this, function () {\n              return _this6.runRule(parent);\n            }, null, {\n              lazy: true\n            });\n          }\n\n          var model = this.getModel();\n\n          if (!this._indirectWatcher.dirty && this._lastModel === model) {\n            this._indirectWatcher.depend();\n\n            return target.value;\n          }\n\n          this._lastModel = model;\n\n          this._indirectWatcher.evaluate();\n\n          this._indirectWatcher.depend();\n        } else if (this._indirectWatcher) {\n          this._indirectWatcher.teardown();\n\n          this._indirectWatcher = null;\n        }\n\n        return this._indirectWatcher ? this._indirectWatcher.value : this.runRule(parent);\n      },\n      $params: function $params() {\n        return this.run.params;\n      },\n      proxy: function proxy() {\n        var output = this.run.output;\n\n        if (output[__isVuelidateAsyncVm]) {\n          return !!output.v;\n        }\n\n        return !!output;\n      },\n      $pending: function $pending() {\n        var output = this.run.output;\n\n        if (output[__isVuelidateAsyncVm]) {\n          return output.p;\n        }\n\n        return false;\n      }\n    },\n    destroyed: function destroyed() {\n      if (this._indirectWatcher) {\n        this._indirectWatcher.teardown();\n\n        this._indirectWatcher = null;\n      }\n    }\n  });\n  var Validation = VBase.extend({\n    data: function data() {\n      return {\n        dirty: false,\n        validations: null,\n        lazyModel: null,\n        model: null,\n        prop: null,\n        lazyParentModel: null,\n        rootModel: null\n      };\n    },\n    methods: _objectSpread({}, validationMethods, {\n      refProxy: function refProxy(key) {\n        return this.getRef(key).proxy;\n      },\n      getRef: function getRef(key) {\n        return this.refs[key];\n      },\n      isNested: function isNested(key) {\n        return typeof this.validations[key] !== 'function';\n      }\n    }),\n    computed: _objectSpread({}, validationGetters, {\n      nestedKeys: function nestedKeys() {\n        return this.keys.filter(this.isNested);\n      },\n      ruleKeys: function ruleKeys() {\n        var _this7 = this;\n\n        return this.keys.filter(function (k) {\n          return !_this7.isNested(k);\n        });\n      },\n      keys: function keys() {\n        return Object.keys(this.validations).filter(function (k) {\n          return k !== '$params';\n        });\n      },\n      proxy: function proxy() {\n        var _this8 = this;\n\n        var keyDefs = buildFromKeys(this.keys, function (key) {\n          return {\n            enumerable: true,\n            configurable: true,\n            get: function get() {\n              return _this8.refProxy(key);\n            }\n          };\n        });\n        var getterDefs = buildFromKeys(getterNames, function (key) {\n          return {\n            enumerable: true,\n            configurable: true,\n            get: function get() {\n              return _this8[key];\n            }\n          };\n        });\n        var methodDefs = buildFromKeys(methodNames, function (key) {\n          return {\n            enumerable: false,\n            configurable: true,\n            get: function get() {\n              return _this8[key];\n            }\n          };\n        });\n        var iterDefs = this.hasIter() ? {\n          $iter: {\n            enumerable: true,\n            value: Object.defineProperties({}, _objectSpread({}, keyDefs))\n          }\n        } : {};\n        return Object.defineProperties({}, _objectSpread({}, keyDefs, iterDefs, {\n          $model: {\n            enumerable: true,\n            get: function get() {\n              var parent = _this8.lazyParentModel();\n\n              if (parent != null) {\n                return parent[_this8.prop];\n              } else {\n                return null;\n              }\n            },\n            set: function set(value) {\n              var parent = _this8.lazyParentModel();\n\n              if (parent != null) {\n                parent[_this8.prop] = value;\n\n                _this8.$touch();\n              }\n            }\n          }\n        }, getterDefs, methodDefs));\n      },\n      children: function children() {\n        var _this9 = this;\n\n        return _toConsumableArray(this.nestedKeys.map(function (key) {\n          return renderNested(_this9, key);\n        })).concat(_toConsumableArray(this.ruleKeys.map(function (key) {\n          return renderRule(_this9, key);\n        }))).filter(Boolean);\n      }\n    })\n  });\n  var GroupValidation = Validation.extend({\n    methods: {\n      isNested: function isNested(key) {\n        return typeof this.validations[key]() !== 'undefined';\n      },\n      getRef: function getRef(key) {\n        var vm = this;\n        return {\n          get proxy() {\n            return vm.validations[key]() || false;\n          }\n\n        };\n      }\n    }\n  });\n  var EachValidation = Validation.extend({\n    computed: {\n      keys: function keys() {\n        var model = this.getModel();\n\n        if (isObject(model)) {\n          return Object.keys(model);\n        } else {\n          return [];\n        }\n      },\n      tracker: function tracker() {\n        var _this10 = this;\n\n        var trackBy = this.validations.$trackBy;\n        return trackBy ? function (key) {\n          return \"\".concat(getPath(_this10.rootModel, _this10.getModelKey(key), trackBy));\n        } : function (x) {\n          return \"\".concat(x);\n        };\n      },\n      getModelLazy: function getModelLazy() {\n        var _this11 = this;\n\n        return function () {\n          return _this11.getModel();\n        };\n      },\n      children: function children() {\n        var _this12 = this;\n\n        var def = this.validations;\n        var model = this.getModel();\n\n        var validations = _objectSpread({}, def);\n\n        delete validations['$trackBy'];\n        var usedTracks = {};\n        return this.keys.map(function (key) {\n          var track = _this12.tracker(key);\n\n          if (usedTracks.hasOwnProperty(track)) {\n            return null;\n          }\n\n          usedTracks[track] = true;\n          return (0, _vval.h)(Validation, track, {\n            validations: validations,\n            prop: key,\n            lazyParentModel: _this12.getModelLazy,\n            model: model[key],\n            rootModel: _this12.rootModel\n          });\n        }).filter(Boolean);\n      }\n    },\n    methods: {\n      isNested: function isNested() {\n        return true;\n      },\n      getRef: function getRef(key) {\n        return this.refs[this.tracker(key)];\n      },\n      hasIter: function hasIter() {\n        return true;\n      }\n    }\n  });\n\n  var renderNested = function renderNested(vm, key) {\n    if (key === '$each') {\n      return (0, _vval.h)(EachValidation, key, {\n        validations: vm.validations[key],\n        lazyParentModel: vm.lazyParentModel,\n        prop: key,\n        lazyModel: vm.getModel,\n        rootModel: vm.rootModel\n      });\n    }\n\n    var validations = vm.validations[key];\n\n    if (Array.isArray(validations)) {\n      var root = vm.rootModel;\n      var refVals = buildFromKeys(validations, function (path) {\n        return function () {\n          return getPath(root, root.$v, path);\n        };\n      }, function (v) {\n        return Array.isArray(v) ? v.join('.') : v;\n      });\n      return (0, _vval.h)(GroupValidation, key, {\n        validations: refVals,\n        lazyParentModel: NIL,\n        prop: key,\n        lazyModel: NIL,\n        rootModel: root\n      });\n    }\n\n    return (0, _vval.h)(Validation, key, {\n      validations: validations,\n      lazyParentModel: vm.getModel,\n      prop: key,\n      lazyModel: vm.getModelKey,\n      rootModel: vm.rootModel\n    });\n  };\n\n  var renderRule = function renderRule(vm, key) {\n    return (0, _vval.h)(ValidationRule, key, {\n      rule: vm.validations[key],\n      lazyParentModel: vm.lazyParentModel,\n      lazyModel: vm.getModel,\n      rootModel: vm.rootModel\n    });\n  };\n\n  _cachedComponent = {\n    VBase: VBase,\n    Validation: Validation\n  };\n  return _cachedComponent;\n};\n\nvar _cachedVue = null;\n\nfunction getVue(rootVm) {\n  if (_cachedVue) return _cachedVue;\n  var Vue = rootVm.constructor;\n\n  while (Vue.super) {\n    Vue = Vue.super;\n  }\n\n  _cachedVue = Vue;\n  return Vue;\n}\n\nvar validateModel = function validateModel(model, validations) {\n  var Vue = getVue(model);\n\n  var _getComponent = getComponent(Vue),\n      Validation = _getComponent.Validation,\n      VBase = _getComponent.VBase;\n\n  var root = new VBase({\n    computed: {\n      children: function children() {\n        var vals = typeof validations === 'function' ? validations.call(model) : validations;\n        return [(0, _vval.h)(Validation, '$v', {\n          validations: vals,\n          lazyParentModel: NIL,\n          prop: '$v',\n          model: model,\n          rootModel: model\n        })];\n      }\n    }\n  });\n  return root;\n};\n\nvar validationMixin = {\n  data: function data() {\n    var vals = this.$options.validations;\n\n    if (vals) {\n      this._vuelidate = validateModel(this, vals);\n    }\n\n    return {};\n  },\n  beforeCreate: function beforeCreate() {\n    var options = this.$options;\n    var vals = options.validations;\n    if (!vals) return;\n    if (!options.computed) options.computed = {};\n    if (options.computed.$v) return;\n\n    options.computed.$v = function () {\n      return this._vuelidate ? this._vuelidate.refs.$v.proxy : null;\n    };\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this._vuelidate) {\n      this._vuelidate.$destroy();\n\n      this._vuelidate = null;\n    }\n  }\n};\nexports.validationMixin = validationMixin;\n\nfunction Vuelidate(Vue) {\n  Vue.mixin(validationMixin);\n}\n\nvar _default = Vuelidate;\nexports.default = _default;","<template>\n  <JsonSchemaForm\n    :schema=\"processedSchema\"\n    :ui-schema=\"uiSchema\"\n    :value=\"value\"\n    :validations=\"validationErrors\"\n    @input=\"handleChange\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue, Mixins, Provide } from 'vue-property-decorator'\nimport { processSchema } from '../utils/processSchema'\nimport { setValidators } from '../utils/setValidators'\nimport { JSONSchema7 } from 'json-schema'\nimport { ISchema, IUiSchema, IAnyObject, ComponentsConfig,\n  WrapperComponentConfig, ErrorMessagesConfig } from '@/types'\nimport JsonSchemaForm from './JsonSchemaForm.vue'\nimport { validationMixin } from 'vuelidate'\nimport { generateDefaultValue } from '../utils/generateDefaultValue'\nimport clone from 'nanoclone'\n// require('purecss/build/pure-min.css')\n\n@Component({\n  mixins: [validationMixin],\n  name: 'JsonSchema',\n  components: { JsonSchemaForm },\n  validations () {\n    return { value: setValidators((this as any).processedSchema) }\n  }\n})\nexport default class JsonSchema extends Vue {\n  @Prop({ required: true }) readonly schema!: JSONSchema7\n  @Prop() readonly uiSchema!: IUiSchema\n  @Prop({ default: () => ({}) }) readonly value!: IAnyObject\n  @Prop() readonly components!: ComponentsConfig\n  @Prop() readonly wrapperComponentConfig!: WrapperComponentConfig\n  @Prop() readonly errorMessagesConfig!: ErrorMessagesConfig\n\n  @Provide() componentsConfig = this.components\n  @Provide() wrapperComponent = this.wrapperComponentConfig\n\n  get validationErrors () {\n    return (this as any).$v.value\n  }\n\n  created () {\n    this.$emit('init-default', generateDefaultValue(this.processedSchema))\n  }\n\n  handleChange ({ path, value } : { path: Array<string>, value: any }) {\n    const newValue = { ...this.value }\n    const paramName = path.pop() || ''\n\n    let target = newValue\n    path.forEach(paramName => {\n      if (!target[paramName]) target[paramName] = {}\n      target = target[paramName]\n    })\n\n    target[paramName] = value\n\n    this.$emit('input', newValue)\n  }\n\n  get unreffedSchema () : any {\n    return {}\n  }\n\n  get processedSchema () : ISchema {\n    // todo: unref schema => check conditions => finalized schema\n    return processSchema(this.schema)\n  }\n}\n</script>\n","<template>\n  <div id=\"app\">\n    <JsonSchema\n      class=\"schema\"\n      :schema=\"schema\"\n      :ui-schema=\"uiSchema\"\n      :components=\"[]\"\n      v-model=\"value\"\n    />\n      <!-- @init-default=\"value = $event\" -->\n    <pre>{{ formattedValue }}</pre>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator'\nimport JsonSchema from './JsonSchema'\n\n@Component({\n  name: 'App',\n  components: {\n    JsonSchema\n  }\n})\nexport default class App extends Vue {\n  schema = {\n    type: 'object',\n    properties: {\n      aaa: { type: 'number', maximum: 10 },\n      arr: {\n        type: 'array',\n        items: { type: 'object', properties: { a: { type: 'string', minLength: 2 }, b: { type: 'boolean' } } }\n      },\n      bbb: { type: 'boolean' },\n      ccc: { type: 'string', enum: ['1', '2', '3'] },\n      ddd: {\n        type: 'object',\n        title: '',\n        properties: {\n          a1: { type: 'string', minLength: 1, maxLength: 5 },\n          b2: { type: 'boolean', default: true },\n          ddd: {\n            type: 'object',\n            properties: {\n              a1: { type: 'string', default: 'aaa' },\n              b2: { type: 'boolean' }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  uiSchema = {\n    properties: {\n      ccc: { order: 1, uiType: 'radio' },\n      ddd: {\n        properties: {\n          b2: { order: 2 },\n          ddd: { order: 1 }\n        }\n      }\n    }\n  }\n\n  value = {\n    arr: [{ a: 'qwerty', b: true }],\n    aaa: '123asd',\n    bbb: true,\n    ccc: 3\n  }\n\n  get formattedValue () : string {\n    return JSON.stringify(this.value, null, 2)\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  display: flex;\n  padding: 20px 0;\n}\n\n.schema {\n  margin-right: 100px;\n  width: 400px!important;\n}\n</style>\n","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')\n"],"names":["const","processSchema","schema","strippedSchema","Object","type","properties","entries","forEach","ref","propName","propSchema","items","_typeof","obj","Symbol","iterator","constructor","prototype","defineProperty","exports","value","root","window","global","withParams","vuelidate","paramsOrClosure","maybeValidator","undefined","_default","require$$0","enumerable","get","_withParams","default","__esModule","req","Array","isArray","length","Date","isNaN","getTime","_","String","keys","reference","vm","parentVm","call","expr","test","_common","min","len","max","setValidators","validations","property","propertyObject","minLength","minimum","required","maxLength","minValue","maximum","maxValue","$each","isUndef","v","isDef","sameVval","oldVval","vval","tag","key","createVm","Vm","data","args","createKeyToOldIdx","children","beginIdx","endIdx","i","map","addVvals","vvals","startIdx","removeVvals","ch","$destroy","patchVval","k","updateVval","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVval","oldEndVval","newEndIdx","newStartVval","newEndVval","updateChildren","_defineProperty","configurable","writable","pushParams","popParams","params","validator","withParamsClosure","add","_len","arguments","_key","apply","this","withParamsDirect","stack","target","push","lastTarget","newTarget","pop","$sub","addParams","Error","source","ownKeys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","_objectSpread","closure","_len2","_key2","x","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","toString","from","_iterableToArray","TypeError","_nonIterableSpread","Vuelidate","_params","NIL","buildFromKeys","fn","keyFn","reduce","build","isFunction","val","isObject","getPath","ctx","path","fallback","split","__isVuelidateAsyncVm","validationGetters","$invalid","_this","proxy","nestedKeys","some","nested","refProxy","ruleKeys","rule","$dirty","_this2","dirty","every","$anyDirty","_this3","$error","$pending","$anyError","_this4","getRef","$params","_this5","vals","setDirtyRecursive","newState","method","validationMethods","$touch","$reset","$flattenParams","isNested","childParams","j","unshift","name","getterNames","methodNames","_cachedComponent","getComponent","Vue","VBase","extend","computed","refs","_vval","patchChildren","c","beforeCreate","beforeDestroy","methods","getModel","lazyModel","prop","model","getModelKey","hasIter","ValidationRule","lazyParentModel","rootModel","runRule","parent","object","rawOutput","output","then","promise","asyncVm","p","error","makePendingAsyncVm","rawParams","run","_this6","__ob__","arrayDep","dep","depend","_indirectWatcher","Watcher","lazy","_lastModel","evaluate","teardown","destroyed","Validation","_this7","_this8","keyDefs","getterDefs","methodDefs","iterDefs","$iter","defineProperties","$model","set","_this9","renderNested","renderRule","Boolean","GroupValidation","EachValidation","tracker","_this10","trackBy","$trackBy","getModelLazy","_this11","_this12","def","usedTracks","track","hasOwnProperty","h","refVals","$v","join","_cachedVue","validateModel","rootVm","super","getVue","_getComponent","validationMixin","$options","_vuelidate","options","mixin","config","productionTip","render","App","$mount"],"mappings":"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"}