import e from"vue";import{_ as t,P as r,a as n,C as o,g as i,J as a,b as s,c as p}from"./JsonSchemaForm-fbe10040.js";import{validationMixin as u}from"vuelidate";var c=function(e){var t=Object.assign({},e,{type:"null"!==e.type&&"object"!=typeof e.type?e.type:"string"});return e.properties&&(t.properties={},Object.entries(e.properties).forEach((function(e){var r=e[0],n=e[1];t.properties[r]=c(n)}))),e.items&&(t.items=c(e.items)),t},f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function l(e,t){return e(t={exports:{}},t.exports),t.exports}var m=l((function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withParams=void 0;var n="undefined"!=typeof window?window:void 0!==f?f:{},o=n.vuelidate?n.vuelidate.withParams:function(e,t){return"object"===r(e)&&void 0!==t?t:e((function(){}))};t.withParams=o}));d(m);m.withParams;var y=l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=m.withParams;t.default=r}));d(y);var h=l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"withParams",{enumerable:!0,get:function(){return n.default}}),t.regex=t.ref=t.len=t.req=void 0;var r,n=(r=y)&&r.__esModule?r:{default:r};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){if(Array.isArray(e))return!!e.length;if(null==e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"===o(e)){for(var t in e)return!0;return!1}return!!String(e).length};t.req=i;t.len=function(e){return Array.isArray(e)?e.length:"object"===o(e)?Object.keys(e).length:String(e).length};t.ref=function(e,t,r){return"function"==typeof e?e.call(t,r):r[e]};t.regex=function(e,t){return(0,n.default)({type:e},(function(e){return!i(e)||t.test(e)}))}}));d(h);h.regex,h.ref,h.len,h.req;var v,b,g=d(l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,h.withParams)({type:"required"},h.req);t.default=r}))),j=d(l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return(0,h.withParams)({type:"minLength",min:e},(function(t){return!(0,h.req)(t)||(0,h.len)(t)>=e}))}}))),O=d(l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return(0,h.withParams)({type:"maxLength",max:e},(function(t){return!(0,h.req)(t)||(0,h.len)(t)<=e}))}}))),S=d(l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return(0,h.withParams)({type:"minValue",min:e},(function(t){return!(0,h.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t>=+e}))}}))),_=d(l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return(0,h.withParams)({type:"maxValue",max:e},(function(t){return!(0,h.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t<=+e}))}}))),w=function(e){var t={};return e.properties&&Object.keys(e.properties).forEach((function(r){var n=e.properties[r];t[r]={},("string"===n.type&&n.minLength||"number"===n.type&&n.minimum||"integer"===n.type&&n.minimum||"array"===n.type&&n.minLength)&&(t[r].required=g),n.minLength&&(t[r].minLength=j(n.minLength)),n.maxLength&&(t[r].maxLength=O(n.maxLength)),n.minimum&&(t[r].minValue=S(n.minimum)),n.maximum&&(t[r].maxValue=_(n.maximum)),"object"===n.type&&(t[r]=w(n)),"array"===n.type&&n.items&&"object"===n.items.type&&(t[r]=Object.assign({},t[r],{$each:w(n.items)}))})),t};try{v=Map}catch(e){}try{b=Set}catch(e){}function x(e){return function e(t,r,n){if(!t||"object"!=typeof t||"function"==typeof t)return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(Array.isArray(t))return t.map(x);if(v&&t instanceof v)return new Map(Array.from(t.entries()));if(b&&t instanceof b)return new Set(Array.from(t.values()));if(t instanceof Object){r.push(t);var o=Object.create(t);for(var i in n.push(o),t){var a=r.findIndex((function(e){return e===t[i]}));o[i]=a>-1?n[a]:e(t[i],r,n)}return o}return t}(e,[],[])}var P=x;function E(e){return e&&"object"==typeof e&&!Array.isArray(e)}var L=function(e,t){var r=Object.assign({},e);return e.allOf&&e.allOf.forEach((function(e){return A(e,t,r)})),e.if&&A(e,t,r),Object.keys(e.properties||{}).forEach((function(n){e.properties&&"object"===e.properties[n].type&&r.properties&&t&&t[n]&&(r.properties[n]=L(e.properties[n],t[n]))})),r},A=function(e,t,r){e.if.allOf?e.if.allOf.every((function(e){return C(e,t)}))&&M(r,e.then):e.if.oneOf?e.if.oneOf.some((function(e){return C(e,t)}))&&M(r,e.then):C(e.if,t)&&M(r,e.then)},C=function(e,t){void 0===t&&(t={});for(var r=e.not?e.not.properties:e.properties,n=t,o=Object.keys(r)[0];"const"!==o&&"minLength"!==o;){if("object"!=typeof r)return console.warn("[JSON-SCHEMA] Invalid IF condition: ",e),!1;if(r=r[o],"properties"!==o){if("object"!=typeof n)return console.warn("[JSON-SCHEMA] Invalid IF condition: ",e),!1;n=n[o]}o=Object.keys(r)[0]}return"const"===o?e.not?r.const!==n:r.const===n:"minLength"===o?e.not?r.minLength>(n||"").length:r.minLength<=(n||"").length:void 0},M=function(e,t){return function e(t){for(var r,n,o=[],i=arguments.length-1;i-- >0;)o[i]=arguments[i+1];if(!o.length)return t;var a=o.shift();if(E(t)&&E(a))for(var s in a)E(a[s])?(t[s]||Object.assign(t,((r={})[s]={},r)),e(t[s],a[s])):Object.assign(t,((n={})[s]=a[s],n));return e.apply(void 0,[t].concat(o))}(e,t)},q=function(e){function t(){e.apply(this,arguments),this.componentsConfig=this.components,this.wrapperComponent=this.wrapperComponentConfig}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={validationErrors:{configurable:!0},processedSchema:{configurable:!0},unreffedSchema:{configurable:!0},conditionedScheema:{configurable:!0}};return r.validationErrors.get=function(){return this.$v.value},t.prototype.created=function(){this.$emit("init-default",i(this.processedSchema))},t.prototype.handleChange=function(e){var t=e.path,r=e.value,n=Object.assign({},this.value),o=t.pop()||"",i=n;t.forEach((function(e){i[e]||(i[e]={}),i=i[e]})),i[o]=r,this.$emit("input",n)},r.processedSchema.get=function(){return c(this.schema)},r.unreffedSchema.get=function(){return function(e){function t(e){var t=e.substring(e.lastIndexOf("/")+1);return n.includes(t)||console.warn('[JSON-SCHEMA] Ref="'+e+'" not found in definitions'),n.includes(t)?P(r[t]):{type:"string"}}var r=e.definitions||{},n=Object.keys(r),o=function e(r){var n=Object.assign({},r);return n.properties&&Object.keys(n.properties).forEach((function(r){if(n.properties[r].$ref){var o=t(n.properties[r].$ref);n.properties[r]=Object.assign({},n.properties[r],o)}if("array"===n.properties[r].type&&n.properties[r].items){var i=n.properties[r]&&n.properties[r].items&&n.properties[r].items.$ref?t(n.properties[r].items.$ref):n.properties[r].items;n.properties[r].items=Object.assign({},n.properties[r].items,i),n.properties[r].items=e(n.properties[r].items)}"object"===n.properties[r].type&&(n.properties[r]=e(n.properties[r]))})),(n.allOf||[]).forEach((function(t){t.then&&t.then.properties&&(t.then=e(t.then))})),n.then&&n.then.properties&&(n.then=e(n.then)),n}(e);return delete o.definitions,o}(this.schema)},r.conditionedScheema.get=function(){return L(P(this.unreffedSchema),this.value)},Object.defineProperties(t.prototype,r),t}(e);t([r({required:!0})],q.prototype,"schema",void 0),t([r()],q.prototype,"uiSchema",void 0),t([r({default:function(){return{}}})],q.prototype,"value",void 0),t([r()],q.prototype,"components",void 0),t([r()],q.prototype,"wrapperComponentConfig",void 0),t([r()],q.prototype,"errorMessagesConfig",void 0),t([n()],q.prototype,"componentsConfig",void 0),t([n()],q.prototype,"wrapperComponent",void 0);var J=s({render:function(){var e=this.$createElement;return(this._self._c||e)("JsonSchemaForm",{attrs:{schema:this.conditionedScheema,"ui-schema":this.uiSchema,value:this.value,validations:this.validationErrors},on:{input:this.handleChange}})},staticRenderFns:[]},void 0,q=t([o({mixins:[u],name:"JsonSchema",components:{JsonSchemaForm:a},validations:function(){return{value:w(this.processedSchema)}}})],q),void 0,!1,void 0,!1,void 0,void 0,void 0),$={type:"object",properties:{aaa:{type:"number",maximum:10},arr:{type:"array",items:{type:"object",properties:{a:{type:"string",minLength:2},b:{type:"boolean"}}}},bbb:{type:"boolean"},ccc:{type:"string",enum:["1","2","3"]},ddd:{type:"object",title:"",properties:{a1:{type:"string",minLength:1,maxLength:5},b2:{type:"boolean",default:!0},ddd:{type:"object",properties:{a1:{type:"string",default:"aaa"},b2:{type:"boolean"}}}}}},if:{properties:{aaa:{const:10}}},then:{properties:{newField:{type:"string"}}}},k=function(e){function t(){e.apply(this,arguments),this.uiSchema={properties:{ccc:{order:1,uiType:"radio",disabled:!0},ddd:{properties:{b2:{order:2},ddd:{order:1}}}}},this.value={arr:[{a:"qwerty",b:!0}],aaa:"123asd",bbb:!0,ccc:3}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={schema:{configurable:!0},formattedValue:{configurable:!0}};return r.schema.get=function(){return $},r.formattedValue.get=function(){return JSON.stringify(this.value,null,2)},Object.defineProperties(t.prototype,r),t}(e),F=s({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("JsonSchema",{staticClass:"schema",attrs:{schema:e.schema,"ui-schema":e.uiSchema},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),r("pre",[e._v(e._s(e.formattedValue))])],1)},staticRenderFns:[]},(function(e){e&&e("data-v-5d3f73db_0",{source:"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#2c3e50;display:flex;padding:20px 0}.schema{margin-right:100px;width:400px!important}",map:void 0,media:void 0})}),k=t([o({name:"App",components:{JsonSchema:J}})],k),void 0,!1,void 0,!1,p,void 0,void 0);e.config.productionTip=!1,new e({render:function(e){return e(F)}}).$mount("#app");
//# sourceMappingURL=main.js.map
